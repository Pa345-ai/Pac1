{"uuid":"537d00ad-29a5-490e-b7a6-4bc2559491c3","created_at":"2025-12-20T13:09:06.446174Z","created_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","updated_at":"2025-12-20T13:09:16.564029Z","updated_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","environment":"61332429-0b52-49d4-9994-6b799b026beb","project":"9652dee9-72f7-46e7-a1ea-3139c8f116aa","clone_count":0,"readme":"","name":"Enterprise-ECS-Fargate-High-Availability","description":"","snapshot_url":"","thumbnail_url":"","synced":false,"synced_architectures":{},"template":false,"visibility":"","status":"wip","cloud_provider":"","cloud_providers_version":{"azuread":"3.4.0","azuredevops":"1.11.0","azurestack":"1.0.0","databricks":"1.48.2","google":"6.46.0","oci":"7.12.0","aws":"5.100.0","azurerm":"4.38.1","kubernetes":"2.38.0","scaleway":"2.58.0","aviatrix":"8.0.0"},"terraform_provider":"terraform {\n  required_version = \"\u003e= 1.5.0\"\n\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~\u003e 5.0\"\n    }\n  }\n}\nprovider \"aws\" {   \n  region = var.aws_region\n\n  default_tags {\n    tags = {\n      Project     = var.project_name\n      Environment = var.environment\n      ManagedBy   = \"Terraform\"\n    }\n  }\n}\n","provider_configs":{"aws":[{"attributes":{"region":"us-east-1"},"blocks":{"default_tags":{}}}]},"terraform_config":{"required_providers":{"aws":{"version":"~\u003e 5.0","source":"hashicorp/aws"}}},"tags":null,"author":{"uuid":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","created_at":"2025-12-20T13:00:01.979784Z","created_by":"00000000-0000-0000-0000-000000000000","updated_at":"2025-12-20T13:00:01.979784Z","updated_by":"00000000-0000-0000-0000-000000000000","email":"parameeranasinghe33@gmail.com","email_confirmed":true,"firstname":"Paramee","lastname":"Ranasinghe","organization_role":"owner"},"approved":false,"imported":true,"import_type":"git","diagram":{"uuid":"d2d7194b-331c-45ad-b143-a4f32725ed49","nodes":{"e19707c1-6f4c-48b9-8352-3b1baa84f8ae":{"uuid":"e19707c1-6f4c-48b9-8352-3b1baa84f8ae","metadata":{"iac":{"blockType":"resource","resourceType":"aws_secretsmanager_secret","resourceName":"app_secrets","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"secrets","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":32,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":120,"y":280,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"0fcdff3b-ae5d-43c5-9d34-7e6023219b06":{"name":"name","value":"\"${var.project_name}-${var.environment}-app-secrets\"","valueType":"string","path":"name","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"5e7cb352-45e6-4d67-9b9b-d464b1cf350d":{"name":"kms_key_id","value":"aws_kms_key.secrets.arn","valueType":"string","path":"kms_key_id","editMode":0,"order":3,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"7da1c194-11aa-4e2d-b341-97faddb0bf78":{"name":"tags","value":{"Environment":"var.environment","Name":"\"${var.project_name}-${var.environment}-app-secrets\""},"valueType":"map","path":"tags","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"d56d446f-e663-424b-8f79-6224141699e7":{"name":"recovery_window_in_days","value":7,"valueType":"number","path":"recovery_window_in_days","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"afabcfd7-2776-48f4-8574-b35e0be94268":{"uuid":"afabcfd7-2776-48f4-8574-b35e0be94268","metadata":{"iac":{"blockType":"resource","resourceType":"aws_kms_alias","resourceName":"secrets","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"secrets","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":31,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":280,"y":440,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"d53e176b-3b87-4062-adbe-304b8b730cb5":{"name":"target_key_id","value":"aws_kms_key.secrets.key_id","valueType":"string","path":"target_key_id","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"a2acfd38-68aa-4bd1-b516-7e2254c5159b":{"name":"name","value":"\"alias/${var.project_name}-${var.environment}-secrets\"","valueType":"string","path":"name","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"027c13d7-6016-4ac5-a1af-e69b32b1e389":{"uuid":"027c13d7-6016-4ac5-a1af-e69b32b1e389","metadata":{"iac":{"blockType":"resource","resourceType":"aws_kms_alias","resourceName":"cloudwatch","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"ecs","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":5,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":1080,"y":440,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"24f14ce7-3961-4295-8a04-2828f10e2671":{"name":"target_key_id","value":"aws_kms_key.cloudwatch.key_id","valueType":"string","path":"target_key_id","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"c0f0f3a6-4e23-4929-997f-e8d60d19b724":{"name":"name","value":"\"alias/${var.project_name}-${var.environment}-cloudwatch\"","valueType":"string","path":"name","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"b9c84e1d-4212-45be-8dda-5a6aea7a00d0":{"uuid":"b9c84e1d-4212-45be-8dda-5a6aea7a00d0","metadata":{"iac":{"blockType":"resource","resourceType":"aws_secretsmanager_secret_version","resourceName":"app_secrets","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"secrets","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":33,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":440,"y":440,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"3c6d1b01-53fa-4533-8653-635979ec768b":{"name":"lifecycle","value":null,"valueType":"block","path":"lifecycle","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"1e3b8923-b70f-491e-9fb2-bd82054aacd8":{"name":"ignore_changes","value":["secret_string"],"valueType":"list","path":"lifecycle.ignore_changes","editMode":0,"order":0,"blockId":"3c6d1b01-53fa-4533-8653-635979ec768b","inherited":false},"6f335367-5084-4a16-a3dd-dcdafe272f1c":{"name":"secret_string","value":"jsonencode({\n    STRIPE_SECRET_KEY = \"sk_test_placeholder\"\n    OPENAI_API_KEY    = \"sk-placeholder\"\n    JWT_SECRET        = \"placeholder_string\"\n    DATABASE_URL      = \"postgres://user:pass@host:5432/db\"\n  })","valueType":"string","path":"secret_string","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"2c3619fe-6dc2-497e-98bb-cd83fbde9bad":{"name":"secret_id","value":"aws_secretsmanager_secret.app_secrets.id","valueType":"string","path":"secret_id","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"be1223df-988e-4a1f-855f-153361862a75":{"uuid":"be1223df-988e-4a1f-855f-153361862a75","metadata":{"iac":{"blockType":"resource","resourceType":"aws_kms_key","resourceName":"secrets","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"secrets","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":30,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":280,"y":280,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"ee818f8e-7ea1-472f-a4d5-6a3a42019da7":{"name":"policy","value":"data.aws_iam_policy_document.secrets_kms_policy.json","valueType":"string","path":"policy","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"140aef06-684a-4773-ba04-2c3f0faa5434":{"name":"enable_key_rotation","value":true,"valueType":"bool","path":"enable_key_rotation","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"574017c9-c9eb-4e7d-9a97-1e9e8871df19":{"name":"description","value":"KMS key for application secrets","valueType":"string","path":"description","editMode":0,"order":3,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"65048aae-b1c1-4cf9-8956-d9e2a2ec5351":{"name":"deletion_window_in_days","value":7,"valueType":"number","path":"deletion_window_in_days","editMode":0,"order":4,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"e9002545-09a2-408d-856e-b4839ee67165":{"name":"tags","value":{"Name":"\"${var.project_name}-${var.environment}-secrets-kms\""},"valueType":"map","path":"tags","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"e36d9a18-95d3-4dce-be34-c1321323c123":{"uuid":"e36d9a18-95d3-4dce-be34-c1321323c123","metadata":{"iac":{"blockType":"resource","resourceType":"aws_iam_role_policy","resourceName":"ecs_execution_secrets","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"iam","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":12,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":120,"y":600,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"d0cc61b2-a239-41a0-8493-177446927678":{"name":"role","value":"aws_iam_role.ecs_task_execution.id","valueType":"string","path":"role","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"324fa6ca-5aec-4196-82d7-21a54786308b":{"name":"policy","value":"data.aws_iam_policy_document.ecs_execution_secrets.json","valueType":"string","path":"policy","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"291fe345-bd1a-4df9-ae70-209f52f90164":{"name":"name","value":"\"${var.project_name}-${var.environment}-secrets-execution-policy\"","valueType":"string","path":"name","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"aa54d569-1735-47c6-862a-e3532d8c58e0":{"uuid":"aa54d569-1735-47c6-862a-e3532d8c58e0","metadata":{"iac":{"blockType":"resource","resourceType":"aws_flow_log","resourceName":"main","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"networking","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":27,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":660,"y":1300,"zIndex":3,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"6011ce4e-dc1f-46d8-b746-11de4103f3ff":{"name":"traffic_type","value":"ALL","valueType":"string","path":"traffic_type","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"7d456f44-79bc-4b40-9acb-5890a540fbb4":{"name":"tags","value":{"Name":"\"${var.project_name}-${var.environment}-flow-log\""},"valueType":"map","path":"tags","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"0c272efa-ac29-4b5e-b419-369897fa454b":{"name":"log_destination","value":"aws_cloudwatch_log_group.vpc_flow_log.arn","valueType":"string","path":"log_destination","editMode":0,"order":3,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"e6a7267f-1976-4fd4-b104-0d96340de18a":{"name":"iam_role_arn","value":"aws_iam_role.vpc_flow_log.arn","valueType":"string","path":"iam_role_arn","editMode":0,"order":4,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"1cebe345-af23-4801-8acc-96494818b224":{"name":"vpc_id","value":"aws_vpc.main.id","valueType":"string","path":"vpc_id","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"c682ba12-a885-4145-8dd6-ad7858058f5d":{"uuid":"c682ba12-a885-4145-8dd6-ad7858058f5d","metadata":{"iac":{"blockType":"resource","resourceType":"aws_route_table","resourceName":"private","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"networking","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":23,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":980,"y":1300,"zIndex":3,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"76ea74cf-84f5-44ff-bff3-d5b36a22e270":{"name":"vpc_id","value":"aws_vpc.main.id","valueType":"string","path":"vpc_id","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"f0f65a63-2b6d-46d6-815f-1e59ce7daf7d":{"name":"tags","value":{"Name":"\"${var.project_name}-${var.environment}-private-rt\""},"valueType":"map","path":"tags","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"dabc2579-901a-4e9f-8408-b4673457e6b6":{"name":"route","value":null,"valueType":"block","path":"route","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"3b88252a-e94f-42c7-b1f6-a9b5df21f5a5":{"name":"nat_gateway_id","value":"aws_nat_gateway.main.id","valueType":"string","path":"route.nat_gateway_id","editMode":0,"order":0,"blockId":"dabc2579-901a-4e9f-8408-b4673457e6b6","inherited":false},"d77e5711-8d70-4f1a-a885-7ba65b0f60c9":{"name":"cidr_block","value":"0.0.0.0/0","valueType":"string","path":"route.cidr_block","editMode":0,"order":1,"blockId":"dabc2579-901a-4e9f-8408-b4673457e6b6","inherited":false}}},"8496bd8d-2397-4e4c-adde-d97c109fb5e1":{"uuid":"8496bd8d-2397-4e4c-adde-d97c109fb5e1","metadata":{"iac":{"blockType":"data","resourceType":"aws_availability_zones","resourceName":"available","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"networking","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":42,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":440,"y":600,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"6e1e66d5-16ab-49a6-b155-e5480810648c":{"name":"state","value":"available","valueType":"string","path":"state","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"5549914b-7b8c-430a-9873-2ef7b682f274":{"uuid":"5549914b-7b8c-430a-9873-2ef7b682f274","metadata":{"iac":{"blockType":"resource","resourceType":"aws_internet_gateway","resourceName":"main","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"networking","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":17,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":1140,"y":980,"zIndex":3,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"d8b6ec89-621d-4cb5-b207-76e47fcdd87f":{"name":"vpc_id","value":"aws_vpc.main.id","valueType":"string","path":"vpc_id","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"2c81a17b-c4aa-47b0-8f22-76a0c6002260":{"name":"tags","value":{"Name":"\"${var.project_name}-${var.environment}-igw\""},"valueType":"map","path":"tags","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"beca3cc6-742d-49ee-bf61-b8aa25ac9f28":{"uuid":"beca3cc6-742d-49ee-bf61-b8aa25ac9f28","metadata":{"iac":{"blockType":"resource","resourceType":"aws_lb_listener","resourceName":"http","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"alb","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":3,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":280,"y":760,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"95a5f140-2e70-4a91-aafb-886bc1e9f236":{"name":"protocol","value":"HTTP","valueType":"string","path":"protocol","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"66e773ef-49d9-43f7-a392-8cf47b2a5140":{"name":"port","value":80,"valueType":"number","path":"port","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"cbc4ac8a-1af1-4226-a24d-0afc038f1a25":{"name":"load_balancer_arn","value":"aws_lb.main.arn","valueType":"string","path":"load_balancer_arn","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"a219e0c8-72e1-4de9-bd9f-a814d6a93f1a":{"name":"default_action","value":null,"valueType":"block","path":"default_action","editMode":0,"order":3,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"634b1792-5efa-47cd-bd89-6aa59f1b98ae":{"name":"type","value":"forward","valueType":"string","path":"default_action.type","editMode":0,"order":0,"blockId":"a219e0c8-72e1-4de9-bd9f-a814d6a93f1a","inherited":false},"2a5c1278-c8c6-4501-8ae7-37b05be74f40":{"name":"target_group_arn","value":"aws_lb_target_group.main.arn","valueType":"string","path":"default_action.target_group_arn","editMode":0,"order":1,"blockId":"a219e0c8-72e1-4de9-bd9f-a814d6a93f1a","inherited":false}}},"28161f93-c248-4c9d-9f20-ec8b9e4d7b73":{"uuid":"28161f93-c248-4c9d-9f20-ec8b9e4d7b73","metadata":{"iac":{"blockType":"resource","resourceType":"aws_route_table","resourceName":"public","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"networking","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":22,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":1140,"y":1140,"zIndex":3,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"d8d99e03-4b0e-4892-ac6c-ffb4de9d0717":{"name":"cidr_block","value":"0.0.0.0/0","valueType":"string","path":"route.cidr_block","editMode":0,"order":1,"blockId":"9336ab6d-43f0-44e1-b9aa-7d56863f0699","inherited":false},"44393f01-bd98-4f5e-8bf5-e1be49d74e42":{"name":"vpc_id","value":"aws_vpc.main.id","valueType":"string","path":"vpc_id","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"d546361b-f34f-4a23-aa78-02d1c9d1003d":{"name":"tags","value":{"Name":"\"${var.project_name}-${var.environment}-public-rt\""},"valueType":"map","path":"tags","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"9336ab6d-43f0-44e1-b9aa-7d56863f0699":{"name":"route","value":null,"valueType":"block","path":"route","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"1c24d732-f2dc-4701-9404-609b9fd5bc78":{"name":"gateway_id","value":"aws_internet_gateway.main.id","valueType":"string","path":"route.gateway_id","editMode":0,"order":0,"blockId":"9336ab6d-43f0-44e1-b9aa-7d56863f0699","inherited":false}}},"113d98d3-6c5d-4ae3-bd06-ffad13663b7a":{"uuid":"113d98d3-6c5d-4ae3-bd06-ffad13663b7a","metadata":{"iac":{"blockType":"resource","resourceType":"aws_eip","resourceName":"nat","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"networking","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":20,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":120,"y":760,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"2cca596c-cb10-4f6d-b4a1-110ac05acfca":{"name":"tags","value":{"Name":"\"${var.project_name}-${var.environment}-nat-eip\""},"valueType":"map","path":"tags","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"f3b48ecf-fcde-4396-b1f5-43c3a69c100f":{"name":"domain","value":"vpc","valueType":"string","path":"domain","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"bd618825-acd4-4d0c-be81-7582e72e9ed4":{"name":"depends_on","value":["aws_internet_gateway.main"],"valueType":"list","path":"depends_on","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"bfa33878-b983-4610-a9c7-7408e2e9ddb7":{"uuid":"bfa33878-b983-4610-a9c7-7408e2e9ddb7","metadata":{"iac":{"blockType":"resource","resourceType":"aws_route_table_association","resourceName":"public","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"networking","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":24,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":1520,"y":720,"zIndex":4,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"25bb66d7-dd55-4c58-b9b3-3a6aa521e946":{"name":"route_table_id","value":"aws_route_table.public.id","valueType":"string","path":"route_table_id","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"31610b4f-4f37-414b-878d-35ee431fcc76":{"name":"count","value":2,"valueType":"number","path":"count","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"972ddbc8-e686-4b83-add1-77f2dce701a7":{"name":"subnet_id","value":"aws_subnet.public[count.index].id","valueType":"string","path":"subnet_id","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"617ba6b6-0880-46be-85a5-6eb29e691874":{"uuid":"617ba6b6-0880-46be-85a5-6eb29e691874","metadata":{"iac":{"blockType":"resource","resourceType":"aws_security_group","resourceName":"alb","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"security","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":34,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":380,"height":220,"x":660,"y":660,"zIndex":3,"isLocked":false,"borderRadius":12,"children":["26e9b66d-7609-47eb-ac4f-7097a747237e"],"color":"#FFFFFF85","opacity":1},"cloudConfigs":{"d9566098-7fb5-41c3-8762-e4b89ae993e7":{"name":"cidr_blocks","value":["0.0.0.0/0"],"valueType":"list","path":"ingress.cidr_blocks","editMode":0,"order":4,"blockId":"063a2577-c030-4dbe-b8f2-3075e648fc83","inherited":false},"063a2577-c030-4dbe-b8f2-3075e648fc83":{"name":"ingress","value":null,"valueType":"block","path":"ingress","editMode":0,"order":4,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"d5665430-3eb1-4c83-bbcd-608476b154c8":{"name":"protocol","value":"-1","valueType":"string","path":"egress.protocol","editMode":0,"order":1,"blockId":"441b4982-e9c5-49b1-9221-c3543264d8b0","inherited":false},"d9bee8a2-6665-4d37-9153-8b49f3e90962":{"name":"from_port","value":0,"valueType":"number","path":"egress.from_port","editMode":0,"order":2,"blockId":"441b4982-e9c5-49b1-9221-c3543264d8b0","inherited":false},"3e0ffda0-d7fc-4509-9056-23df78f34aea":{"name":"tags","value":{"Name":"\"${var.project_name}-${var.environment}-alb-sg\""},"valueType":"map","path":"tags","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"81e958e7-da9a-423f-b348-1c96e4a59167":{"name":"description","value":"Security group for Application Load Balancer","valueType":"string","path":"description","editMode":0,"order":3,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"919fef41-0e25-4e1d-a0f9-ea399a7f7f2d":{"name":"description","value":"HTTP from internet","valueType":"string","path":"ingress.description","editMode":0,"order":3,"blockId":"063a2577-c030-4dbe-b8f2-3075e648fc83","inherited":false},"5dabfa0b-9618-4212-a539-88a9775f0101":{"name":"to_port","value":0,"valueType":"number","path":"egress.to_port","editMode":0,"order":0,"blockId":"441b4982-e9c5-49b1-9221-c3543264d8b0","inherited":false},"e4a47a33-bd77-491f-a746-39746129e3fa":{"name":"protocol","value":"tcp","valueType":"string","path":"ingress.protocol","editMode":0,"order":1,"blockId":"063a2577-c030-4dbe-b8f2-3075e648fc83","inherited":false},"81d1692a-2f3c-4204-b5b3-568308a76459":{"name":"description","value":"Allow all outbound traffic","valueType":"string","path":"egress.description","editMode":0,"order":3,"blockId":"441b4982-e9c5-49b1-9221-c3543264d8b0","inherited":false},"7f8f647d-0e13-4016-8ee7-8c8087bdcb11":{"name":"name","value":"\"${var.project_name}-${var.environment}-alb-sg\"","valueType":"string","path":"name","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"1b42aa78-b506-4e15-ae2e-76c2659b0c96":{"name":"to_port","value":80,"valueType":"number","path":"ingress.to_port","editMode":0,"order":0,"blockId":"063a2577-c030-4dbe-b8f2-3075e648fc83","inherited":false},"441b4982-e9c5-49b1-9221-c3543264d8b0":{"name":"egress","value":null,"valueType":"block","path":"egress","editMode":0,"order":5,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"78dc6c46-7091-4c0c-8b4e-8d60128f94a2":{"name":"from_port","value":80,"valueType":"number","path":"ingress.from_port","editMode":0,"order":2,"blockId":"063a2577-c030-4dbe-b8f2-3075e648fc83","inherited":false},"68075b5d-9241-4dee-a5f2-c4b620f1d4d3":{"name":"vpc_id","value":"aws_vpc.main.id","valueType":"string","path":"vpc_id","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"ff45418e-76a7-49d2-8f65-7e7d179d5f2a":{"name":"cidr_blocks","value":["0.0.0.0/0"],"valueType":"list","path":"egress.cidr_blocks","editMode":0,"order":4,"blockId":"441b4982-e9c5-49b1-9221-c3543264d8b0","inherited":false}}},"9652d281-0189-42bd-b204-5a42a68e9246":{"uuid":"9652d281-0189-42bd-b204-5a42a68e9246","metadata":{"iac":{"blockType":"resource","resourceType":"aws_iam_role","resourceName":"ecs_task","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"iam","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":14,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":440,"y":120,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"e6e03256-6bbb-45e5-b2b6-243a0ddcbd7c":{"name":"name","value":"\"${var.project_name}-${var.environment}-ecs-task-role\"","valueType":"string","path":"name","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"d9237850-5f24-40fe-9ba3-7aada9e45e6e":{"name":"assume_role_policy","value":"data.aws_iam_policy_document.ecs_task_assume_role.json","valueType":"string","path":"assume_role_policy","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"29a2de97-936b-4a1a-b177-c8187fe31599":{"uuid":"29a2de97-936b-4a1a-b177-c8187fe31599","metadata":{"iac":{"blockType":"resource","resourceType":"aws_route_table_association","resourceName":"private","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"networking","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":25,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":880,"y":1040,"zIndex":4,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"ee2fbf00-6e6c-4245-9ea0-05a69d610749":{"name":"route_table_id","value":"aws_route_table.private.id","valueType":"string","path":"route_table_id","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"a87d848f-4640-4ee5-8636-70d667b16197":{"name":"count","value":2,"valueType":"number","path":"count","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"70ebac75-598f-4e40-a333-e3b48276dbe6":{"name":"subnet_id","value":"aws_subnet.private[count.index].id","valueType":"string","path":"subnet_id","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"367fcb07-53be-4af5-a815-6fb727b080e5":{"uuid":"367fcb07-53be-4af5-a815-6fb727b080e5","metadata":{"iac":{"blockType":"resource","resourceType":"aws_lb_target_group","resourceName":"main","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"alb","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":2,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":820,"y":1300,"zIndex":3,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"7ace85b0-7625-46da-a551-244481f6e687":{"name":"tags","value":{"Name":"\"${var.project_name}-${var.environment}-tg\""},"valueType":"map","path":"tags","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"2d3aac00-4a09-4e42-aa80-3f8a09df932a":{"name":"deregistration_delay","value":30,"valueType":"number","path":"deregistration_delay","editMode":0,"order":6,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"a1782403-931a-4592-8fb8-640848b12e62":{"name":"target_type","value":"ip","valueType":"string","path":"target_type","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"4d2a953f-bd6c-4b8d-8885-3610532c427c":{"name":"timeout","value":5,"valueType":"number","path":"health_check.timeout","editMode":0,"order":1,"blockId":"ce25241f-2b7c-4535-b7bb-207e06945d72","inherited":false},"ce25241f-2b7c-4535-b7bb-207e06945d72":{"name":"health_check","value":null,"valueType":"block","path":"health_check","editMode":0,"order":7,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"1c256277-eca6-491f-b791-79b3b537f181":{"name":"protocol","value":"HTTP","valueType":"string","path":"health_check.protocol","editMode":0,"order":2,"blockId":"ce25241f-2b7c-4535-b7bb-207e06945d72","inherited":false},"b6c889be-32db-4fa9-a98c-dbf667beb31e":{"name":"path","value":"/","valueType":"string","path":"health_check.path","editMode":0,"order":3,"blockId":"ce25241f-2b7c-4535-b7bb-207e06945d72","inherited":false},"ec4a9a39-3733-4c28-9af0-22e99c2ba57b":{"name":"vpc_id","value":"aws_vpc.main.id","valueType":"string","path":"vpc_id","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"0139dde7-cf5e-4945-baaa-2722f71f384a":{"name":"port","value":"var.container_port","valueType":"string","path":"port","editMode":0,"order":4,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"ff0e72b3-8ff6-461c-9f6e-69bca4c03ef9":{"name":"enabled","value":true,"valueType":"bool","path":"health_check.enabled","editMode":0,"order":7,"blockId":"ce25241f-2b7c-4535-b7bb-207e06945d72","inherited":false},"b5a8b456-aeab-4ee2-b6b1-c3734fa909df":{"name":"protocol","value":"HTTP","valueType":"string","path":"protocol","editMode":0,"order":3,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"8c809d3b-4d1e-49db-b293-90b38363a451":{"name":"name","value":"\"${var.project_name}-${var.environment}-tg\"","valueType":"string","path":"name","editMode":0,"order":5,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"f6697b12-a540-4ac0-96ed-0a52be1cdf1c":{"name":"healthy_threshold","value":2,"valueType":"number","path":"health_check.healthy_threshold","editMode":0,"order":6,"blockId":"ce25241f-2b7c-4535-b7bb-207e06945d72","inherited":false},"543f3941-7f94-4e86-8eed-011de283ede7":{"name":"unhealthy_threshold","value":3,"valueType":"number","path":"health_check.unhealthy_threshold","editMode":0,"order":0,"blockId":"ce25241f-2b7c-4535-b7bb-207e06945d72","inherited":false},"f59b705e-6ff9-494f-b7e7-4d8835ffb1ef":{"name":"interval","value":30,"valueType":"number","path":"health_check.interval","editMode":0,"order":5,"blockId":"ce25241f-2b7c-4535-b7bb-207e06945d72","inherited":false},"ca0fb98d-a708-4fd1-b441-f66163c3b9ee":{"name":"matcher","value":"200-399","valueType":"string","path":"health_check.matcher","editMode":0,"order":4,"blockId":"ce25241f-2b7c-4535-b7bb-207e06945d72","inherited":false}}},"c7ad57dc-3c5c-4d29-8676-7ffedec3d2ca":{"uuid":"c7ad57dc-3c5c-4d29-8676-7ffedec3d2ca","metadata":{"iac":{"blockType":"resource","resourceType":"aws_vpc","resourceName":"main","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"networking","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":16,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":1180,"height":860,"x":600,"y":600,"zIndex":2,"isLocked":false,"borderRadius":12,"children":["c682ba12-a885-4145-8dd6-ad7858058f5d","5549914b-7b8c-430a-9873-2ef7b682f274","aa54d569-1735-47c6-862a-e3532d8c58e0","28161f93-c248-4c9d-9f20-ec8b9e4d7b73","367fcb07-53be-4af5-a815-6fb727b080e5","aec2d540-ef9d-4de8-b181-2e613c79df3c","9010484f-d264-4587-b6ac-94e4cddea7f8","617ba6b6-0880-46be-85a5-6eb29e691874"],"color":"#FFFFFF85","opacity":1},"cloudConfigs":{"447f0a35-fce2-4a9f-9856-d73c61529e0c":{"name":"tags","value":{"Name":"\"${var.project_name}-${var.environment}-vpc\""},"valueType":"map","path":"tags","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"e0e84857-55cf-43d6-8b60-ff2bf040e79f":{"name":"enable_dns_support","value":true,"valueType":"bool","path":"enable_dns_support","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"fff631f1-c3c8-46e2-9f8f-12ce6cf12036":{"name":"enable_dns_hostnames","value":true,"valueType":"bool","path":"enable_dns_hostnames","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"315ef321-3f2d-4991-99be-33f478dc29e4":{"name":"cidr_block","value":"var.vpc_cidr","valueType":"string","path":"cidr_block","editMode":0,"order":3,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"17393011-711b-4181-a18f-1bfda852c2af":{"uuid":"17393011-711b-4181-a18f-1bfda852c2af","metadata":{"iac":{"blockType":"data","resourceType":"aws_iam_policy_document","resourceName":"vpc_flow_logs","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"networking","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":43,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":760,"y":440,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"e515e3e4-0b10-425f-9fd0-661e964c0c29":{"name":"effect","value":"Allow","valueType":"string","path":"statement.effect","editMode":0,"order":2,"blockId":"0d9e4141-6581-4559-9aaa-3ab6844b2d7d","inherited":false},"41bfc6d9-e2ad-436b-8016-39fa0b2936fd":{"name":"statement","value":null,"valueType":"block","path":"statement","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"6184f2d9-cfd8-4ae1-98df-16d6244c504b":{"name":"resources","value":["aws_cloudwatch_log_group.vpc_flow_log.arn"],"valueType":"list","path":"statement.resources","editMode":0,"order":1,"blockId":"41bfc6d9-e2ad-436b-8016-39fa0b2936fd","inherited":false},"ffa28bab-7968-4558-8dfe-555915a89d4c":{"name":"actions","value":["logs:DescribeLogGroups","logs:DescribeLogStreams"],"valueType":"list","path":"statement.actions","editMode":0,"order":3,"blockId":"41bfc6d9-e2ad-436b-8016-39fa0b2936fd","inherited":false},"e0c18290-8068-4319-ab42-ebdafe6bd376":{"name":"sid","value":"AllowKMSOperations","valueType":"string","path":"statement.sid","editMode":0,"order":0,"blockId":"bc01db98-2a19-426e-8374-a2018ff3a2d7","inherited":false},"2047f0e5-18d5-44be-b04d-ed9eb707b704":{"name":"sid","value":"AllowCreateLogStream","valueType":"string","path":"statement.sid","editMode":0,"order":0,"blockId":"0d9e4141-6581-4559-9aaa-3ab6844b2d7d","inherited":false},"325cf29b-37f2-4948-a732-0a067e475909":{"name":"resources","value":["aws_cloudwatch_log_group.vpc_flow_log.arn"],"valueType":"list","path":"statement.resources","editMode":0,"order":1,"blockId":"0d9e4141-6581-4559-9aaa-3ab6844b2d7d","inherited":false},"236da96e-293b-4506-ba35-de3352d8ee92":{"name":"actions","value":["kms:Decrypt","kms:GenerateDataKey"],"valueType":"list","path":"statement.actions","editMode":0,"order":3,"blockId":"bc01db98-2a19-426e-8374-a2018ff3a2d7","inherited":false},"9094f2db-59f4-4d53-b1ff-a2c55d5de45a":{"name":"statement","value":null,"valueType":"block","path":"statement","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"02a88921-f3c3-4ef0-a39f-5c0a19693496":{"name":"actions","value":["logs:PutLogEvents"],"valueType":"list","path":"statement.actions","editMode":0,"order":3,"blockId":"9094f2db-59f4-4d53-b1ff-a2c55d5de45a","inherited":false},"0d9e4141-6581-4559-9aaa-3ab6844b2d7d":{"name":"statement","value":null,"valueType":"block","path":"statement","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"663f9f8e-62d6-46b5-8971-ef3025c66960":{"name":"effect","value":"Allow","valueType":"string","path":"statement.effect","editMode":0,"order":2,"blockId":"41bfc6d9-e2ad-436b-8016-39fa0b2936fd","inherited":false},"1ab528eb-2a09-4f93-8b72-d7adfd3d4fd5":{"name":"resources","value":["\"${aws_cloudwatch_log_group.vpc_flow_log.arn}:log-stream:*\""],"valueType":"list","path":"statement.resources","editMode":0,"order":1,"blockId":"9094f2db-59f4-4d53-b1ff-a2c55d5de45a","inherited":false},"bc01db98-2a19-426e-8374-a2018ff3a2d7":{"name":"statement","value":null,"valueType":"block","path":"statement","editMode":0,"order":3,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"7f444352-3f3e-4055-9516-1c472916b2b9":{"name":"effect","value":"Allow","valueType":"string","path":"statement.effect","editMode":0,"order":2,"blockId":"9094f2db-59f4-4d53-b1ff-a2c55d5de45a","inherited":false},"7421340c-1e62-4d49-a33c-d9646688b368":{"name":"resources","value":["aws_kms_key.cloudwatch.arn"],"valueType":"list","path":"statement.resources","editMode":0,"order":1,"blockId":"bc01db98-2a19-426e-8374-a2018ff3a2d7","inherited":false},"ba11d147-176e-4a9d-8079-741a7b3b5221":{"name":"actions","value":["logs:CreateLogStream"],"valueType":"list","path":"statement.actions","editMode":0,"order":3,"blockId":"0d9e4141-6581-4559-9aaa-3ab6844b2d7d","inherited":false},"a3136625-7e71-4367-8011-fc5643487fab":{"name":"effect","value":"Allow","valueType":"string","path":"statement.effect","editMode":0,"order":2,"blockId":"bc01db98-2a19-426e-8374-a2018ff3a2d7","inherited":false},"d1c621d5-ab66-4d94-a59b-dc5c5ef1d982":{"name":"sid","value":"AllowPutLogEvents","valueType":"string","path":"statement.sid","editMode":0,"order":0,"blockId":"9094f2db-59f4-4d53-b1ff-a2c55d5de45a","inherited":false},"5de40213-cc4e-4a75-853d-8d1492605f25":{"name":"sid","value":"AllowDescribeLogResources","valueType":"string","path":"statement.sid","editMode":0,"order":0,"blockId":"41bfc6d9-e2ad-436b-8016-39fa0b2936fd","inherited":false}}},"8311064d-95a9-4d09-976f-ec45e71298f8":{"uuid":"8311064d-95a9-4d09-976f-ec45e71298f8","metadata":{"iac":{"blockType":"resource","resourceType":"region","resourceName":"region08283dcf","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":0,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":1820,"height":1500,"x":60,"y":60,"zIndex":1,"isLocked":false,"borderRadius":20,"children":["e36d9a18-95d3-4dce-be34-c1321323c123","17393011-711b-4181-a18f-1bfda852c2af","1df0d016-9025-491b-81fb-6df3befdea2d","9652d281-0189-42bd-b204-5a42a68e9246","cb069311-7dc1-4899-887c-36a153b0cb4e","8496bd8d-2397-4e4c-adde-d97c109fb5e1","a4fdd51a-09f8-4ae8-8ce1-8fe4a1da800c","e68c9676-89ea-4b6e-8774-28fb9aa9435d","712d519a-0b89-424d-a231-6600d3515553","f5f68808-300c-4eb8-9170-fcface54d984","e19707c1-6f4c-48b9-8352-3b1baa84f8ae","b9c84e1d-4212-45be-8dda-5a6aea7a00d0","af58e92b-d3f5-4367-92d6-1435b8bbb3fd","3393f8f1-9096-4bb0-95a7-06b4e8a2cd5d","f2ef1ab0-d859-4843-bdc2-0a7303a97e44","be1223df-988e-4a1f-855f-153361862a75","c7ad57dc-3c5c-4d29-8676-7ffedec3d2ca","207902b1-6657-4d75-95bf-e145b4f09666","b65070fb-a8c7-44b9-918b-5d44456bafca","66293e25-5096-4c01-8a4f-1735f6dc5b40","beca3cc6-742d-49ee-bf61-b8aa25ac9f28","6adc970b-736c-4cb7-a808-6a9a5fec375c","f72302b7-5597-419d-b661-fcbb6270c1a1","1f920ed8-d16d-49fd-b466-959ed27b9e55","113d98d3-6c5d-4ae3-bd06-ffad13663b7a","0ac782e5-04e7-4d25-8dbe-15c8f822f3fd","5ecaa37f-fa55-4164-a5ad-ab6dba9e27dd","b16814e8-9f50-4528-8a5d-2ac30779212a","a6246fee-0118-4390-b402-1746ed81393d","afabcfd7-2776-48f4-8574-b35e0be94268","027c13d7-6016-4ac5-a1af-e69b32b1e389"],"color":"transparent","dashes":"9 7 0","opacity":1},"cloudConfigs":{}},"0ac782e5-04e7-4d25-8dbe-15c8f822f3fd":{"uuid":"0ac782e5-04e7-4d25-8dbe-15c8f822f3fd","metadata":{"iac":{"blockType":"data","resourceType":"aws_iam_policy_document","resourceName":"secrets_access","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"secrets","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":45,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":440,"y":280,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"2cc80bd6-bbf1-464c-a576-2d696533d70b":{"name":"effect","value":"Allow","valueType":"string","path":"statement.effect","editMode":0,"order":1,"blockId":"f40cb0d1-ad15-4e65-87c6-6b183918b815","inherited":false},"5201eabe-05bc-4457-921a-c13dc0abd00c":{"name":"actions","value":["secretsmanager:GetSecretValue","secretsmanager:DescribeSecret"],"valueType":"list","path":"statement.actions","editMode":0,"order":2,"blockId":"f40cb0d1-ad15-4e65-87c6-6b183918b815","inherited":false},"7eb19f9d-728c-4f81-83a6-7049b89a56db":{"name":"statement","value":null,"valueType":"block","path":"statement","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"68618e2b-a8ba-4d51-8cfd-a89c8278b024":{"name":"resources","value":["aws_kms_key.secrets.arn"],"valueType":"list","path":"statement.resources","editMode":0,"order":0,"blockId":"7eb19f9d-728c-4f81-83a6-7049b89a56db","inherited":false},"4d75e1e7-6e1b-44dc-9a24-ae4dce6e66e4":{"name":"effect","value":"Allow","valueType":"string","path":"statement.effect","editMode":0,"order":1,"blockId":"7eb19f9d-728c-4f81-83a6-7049b89a56db","inherited":false},"394e1b55-0259-4d6b-866e-ae8ee2fc874f":{"name":"actions","value":["kms:Decrypt","kms:DescribeKey"],"valueType":"list","path":"statement.actions","editMode":0,"order":2,"blockId":"7eb19f9d-728c-4f81-83a6-7049b89a56db","inherited":false},"f40cb0d1-ad15-4e65-87c6-6b183918b815":{"name":"statement","value":null,"valueType":"block","path":"statement","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"0113b6e2-5685-4564-98a8-bee273b2a235":{"name":"resources","value":["aws_secretsmanager_secret.app_secrets.arn"],"valueType":"list","path":"statement.resources","editMode":0,"order":0,"blockId":"f40cb0d1-ad15-4e65-87c6-6b183918b815","inherited":false}}},"9010484f-d264-4587-b6ac-94e4cddea7f8":{"uuid":"9010484f-d264-4587-b6ac-94e4cddea7f8","metadata":{"iac":{"blockType":"resource","resourceType":"aws_subnet","resourceName":"private","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"networking","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":19,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":380,"height":220,"x":660,"y":980,"zIndex":3,"isLocked":false,"borderRadius":12,"children":["29a2de97-936b-4a1a-b177-c8187fe31599","66728e10-9b32-49bb-bb5c-d0e9fcf43b20"],"color":"#FFFFFF85","opacity":1},"cloudConfigs":{"05e5d63c-93a2-44d6-af39-71ac72f59dfc":{"name":"count","value":2,"valueType":"number","path":"count","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"59d12e22-3c57-481c-afc4-dd0a818cc05e":{"name":"cidr_block","value":"cidrsubnet(var.vpc_cidr, 8, count.index + 11)","valueType":"string","path":"cidr_block","editMode":0,"order":3,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"5a7c6dc0-a169-413c-8127-7ec1934a9c60":{"name":"availability_zone","value":"data.aws_availability_zones.available.names[count.index]","valueType":"string","path":"availability_zone","editMode":0,"order":4,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"43b3bf73-caa3-49de-a25d-8fd94220e629":{"name":"vpc_id","value":"aws_vpc.main.id","valueType":"string","path":"vpc_id","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"12c089c8-3b96-43c5-b588-a69b03434c37":{"name":"tags","value":{"Name":"\"${var.project_name}-${var.environment}-private-${count.index + 1}\"","Type":"Private"},"valueType":"map","path":"tags","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"a4fdd51a-09f8-4ae8-8ce1-8fe4a1da800c":{"uuid":"a4fdd51a-09f8-4ae8-8ce1-8fe4a1da800c","metadata":{"iac":{"blockType":"resource","resourceType":"aws_cloudwatch_log_group","resourceName":"ecs","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"ecs","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":6,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":1240,"y":120,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"d82b96fb-6368-40d8-afca-acc45616fbcc":{"name":"tags","value":{"Name":"\"${var.project_name}-${var.environment}-ecs-logs\""},"valueType":"map","path":"tags","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"3b00955e-3ecf-4f20-9d5f-df12be8a14b5":{"name":"retention_in_days","value":7,"valueType":"number","path":"retention_in_days","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"a58d81d8-0b57-4fdf-bf5c-e7e32ebcc07f":{"name":"name","value":"\"/ecs/${var.project_name}-${var.environment}\"","valueType":"string","path":"name","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"5449f0ad-79a7-4370-a368-3525ff065ff3":{"name":"kms_key_id","value":"aws_kms_key.cloudwatch.arn","valueType":"string","path":"kms_key_id","editMode":0,"order":3,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"26e9b66d-7609-47eb-ac4f-7097a747237e":{"uuid":"26e9b66d-7609-47eb-ac4f-7097a747237e","metadata":{"iac":{"blockType":"resource","resourceType":"aws_security_group","resourceName":"ecs_tasks","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"security","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":35,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":220,"height":110,"x":720,"y":720,"zIndex":4,"isLocked":false,"borderRadius":12,"children":[],"color":"#FFFFFF85","opacity":1},"cloudConfigs":{"d2586984-b151-43dc-8e15-b728714f128a":{"name":"name","value":"\"${var.project_name}-${var.environment}-ecs-tasks-sg\"","valueType":"string","path":"name","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"3065e114-706b-4bfe-ad49-3620aa07f793":{"name":"from_port","value":0,"valueType":"number","path":"egress.from_port","editMode":0,"order":2,"blockId":"df29c09b-fdea-422b-ae2a-9901e0102781","inherited":false},"1fc458a6-6394-409c-b74f-eee4e6ab425e":{"name":"vpc_id","value":"aws_vpc.main.id","valueType":"string","path":"vpc_id","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"df29c09b-fdea-422b-ae2a-9901e0102781":{"name":"egress","value":null,"valueType":"block","path":"egress","editMode":0,"order":5,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"1dec1457-c9fa-474a-a58a-be08eaf5bcb4":{"name":"to_port","value":0,"valueType":"number","path":"egress.to_port","editMode":0,"order":0,"blockId":"df29c09b-fdea-422b-ae2a-9901e0102781","inherited":false},"d1bc606e-ba30-4739-a2db-21355407bacd":{"name":"tags","value":{"Name":"\"${var.project_name}-${var.environment}-ecs-tasks-sg\""},"valueType":"map","path":"tags","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"9021eac1-ca88-4dcb-b18f-54292cde1b04":{"name":"security_groups","value":["aws_security_group.alb.id"],"valueType":"list","path":"ingress.security_groups","editMode":0,"order":1,"blockId":"fa2c34c7-caa1-40b5-9b95-dd370c9f5bde","inherited":false},"fa2c34c7-caa1-40b5-9b95-dd370c9f5bde":{"name":"ingress","value":null,"valueType":"block","path":"ingress","editMode":0,"order":4,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"a01a5401-98f7-4f8a-bd0d-2f229d4aff6a":{"name":"to_port","value":"var.container_port","valueType":"string","path":"ingress.to_port","editMode":0,"order":0,"blockId":"fa2c34c7-caa1-40b5-9b95-dd370c9f5bde","inherited":false},"b08f82d4-fd5d-4e8c-a11d-1444d4a75068":{"name":"protocol","value":"tcp","valueType":"string","path":"ingress.protocol","editMode":0,"order":2,"blockId":"fa2c34c7-caa1-40b5-9b95-dd370c9f5bde","inherited":false},"5572ea26-f107-48dd-b5de-092b3f3db029":{"name":"description","value":"Allow all outbound traffic","valueType":"string","path":"egress.description","editMode":0,"order":3,"blockId":"df29c09b-fdea-422b-ae2a-9901e0102781","inherited":false},"c09ef3a4-7d60-4445-b6d5-7c2d40967804":{"name":"description","value":"Security group for ECS tasks","valueType":"string","path":"description","editMode":0,"order":3,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"62d467c5-fc83-4214-89cc-c571c36fd425":{"name":"from_port","value":"var.container_port","valueType":"string","path":"ingress.from_port","editMode":0,"order":3,"blockId":"fa2c34c7-caa1-40b5-9b95-dd370c9f5bde","inherited":false},"6c45a241-232f-4a6a-952d-5d74805f8210":{"name":"description","value":"Traffic from ALB","valueType":"string","path":"ingress.description","editMode":0,"order":4,"blockId":"fa2c34c7-caa1-40b5-9b95-dd370c9f5bde","inherited":false},"8fa4a373-4cdb-4238-8401-6007797592a3":{"name":"protocol","value":"-1","valueType":"string","path":"egress.protocol","editMode":0,"order":1,"blockId":"df29c09b-fdea-422b-ae2a-9901e0102781","inherited":false},"47ee6eb5-f454-4b34-b653-10a79169131a":{"name":"cidr_blocks","value":["0.0.0.0/0"],"valueType":"list","path":"egress.cidr_blocks","editMode":0,"order":4,"blockId":"df29c09b-fdea-422b-ae2a-9901e0102781","inherited":false}}},"aec2d540-ef9d-4de8-b181-2e613c79df3c":{"uuid":"aec2d540-ef9d-4de8-b181-2e613c79df3c","metadata":{"iac":{"blockType":"resource","resourceType":"aws_subnet","resourceName":"public","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"networking","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":18,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":540,"height":220,"x":1140,"y":660,"zIndex":3,"isLocked":false,"borderRadius":12,"children":["252c1a99-b33a-4f63-b18f-123704948583","bfa33878-b983-4610-a9c7-7408e2e9ddb7","9aaee689-5d57-45bd-a540-13a6deef3e3c"],"color":"#FFFFFF85","opacity":1},"cloudConfigs":{"1bd902ea-1ac3-4f59-be75-43b968a3305c":{"name":"map_public_ip_on_launch","value":false,"valueType":"bool","path":"map_public_ip_on_launch","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"8617d8be-9878-4537-9ba3-8716ed7c4622":{"name":"count","value":2,"valueType":"number","path":"count","editMode":0,"order":3,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"5f76e502-b5e3-4669-b486-9d62589795bc":{"name":"cidr_block","value":"cidrsubnet(var.vpc_cidr, 8, count.index + 1)","valueType":"string","path":"cidr_block","editMode":0,"order":4,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"2623db61-8636-4f02-9e3c-fc387965e42c":{"name":"availability_zone","value":"data.aws_availability_zones.available.names[count.index]","valueType":"string","path":"availability_zone","editMode":0,"order":5,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"c8ef736d-b236-4547-bec0-0baf0fc411f0":{"name":"vpc_id","value":"aws_vpc.main.id","valueType":"string","path":"vpc_id","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"1feb79ab-3b7a-4c29-ac8c-c2c0d14111df":{"name":"tags","value":{"Name":"\"${var.project_name}-${var.environment}-public-${count.index + 1}\"","Type":"Public"},"valueType":"map","path":"tags","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"252c1a99-b33a-4f63-b18f-123704948583":{"uuid":"252c1a99-b33a-4f63-b18f-123704948583","metadata":{"iac":{"blockType":"resource","resourceType":"aws_nat_gateway","resourceName":"main","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"networking","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":21,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":1360,"y":720,"zIndex":4,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"7af6fe32-f22a-424d-8957-ba0425d386ef":{"name":"subnet_id","value":"aws_subnet.public[0].id","valueType":"string","path":"subnet_id","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"51a02491-0b21-4eea-8510-864eea46b257":{"name":"depends_on","value":["aws_internet_gateway.main"],"valueType":"list","path":"depends_on","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"491066f9-810a-472d-abec-5a8205b7e2c9":{"name":"allocation_id","value":"aws_eip.nat.id","valueType":"string","path":"allocation_id","editMode":0,"order":3,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"76fe19ac-af41-48c2-9124-813b9b8d10fb":{"name":"tags","value":{"Name":"\"${var.project_name}-${var.environment}-nat\""},"valueType":"map","path":"tags","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"66728e10-9b32-49bb-bb5c-d0e9fcf43b20":{"uuid":"66728e10-9b32-49bb-bb5c-d0e9fcf43b20","metadata":{"iac":{"blockType":"resource","resourceType":"aws_ecs_service","resourceName":"main","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"ecs","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":9,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":720,"y":1040,"zIndex":4,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"005a1d00-d7e4-47c4-abf5-f0d01e9c9e7d":{"name":"container_port","value":"var.container_port","valueType":"string","path":"load_balancer.container_port","editMode":0,"order":1,"blockId":"2bd15b6f-1481-4ded-953c-0e83ced31b29","inherited":false},"ee67ce18-d9f7-45d8-97ad-816f656e4d6d":{"name":"name","value":"\"${var.project_name}-${var.environment}-service\"","valueType":"string","path":"name","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"538cc2e9-6a43-48ff-9069-b9b57f81ec08":{"name":"container_name","value":"\"${var.project_name}-container\"","valueType":"string","path":"load_balancer.container_name","editMode":0,"order":2,"blockId":"2bd15b6f-1481-4ded-953c-0e83ced31b29","inherited":false},"19621886-1126-4a1c-b668-60d40bc1e4c2":{"name":"ignore_changes","value":["task_definition"],"valueType":"list","path":"lifecycle.ignore_changes","editMode":0,"order":0,"blockId":"bdd284bf-bd49-45c2-9a80-8a631a958eca","inherited":false},"5c51be44-9fea-4fa0-a586-65dc0b86fd90":{"name":"depends_on","value":["aws_lb_listener.http","aws_iam_role_policy.ecs_task_logs"],"valueType":"list","path":"depends_on","editMode":0,"order":7,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"1ddfbef1-a7a7-4050-bc26-ab80a3de81c7":{"name":"target_group_arn","value":"aws_lb_target_group.main.arn","valueType":"string","path":"load_balancer.target_group_arn","editMode":0,"order":0,"blockId":"2bd15b6f-1481-4ded-953c-0e83ced31b29","inherited":false},"3a976045-741b-47cf-ba76-64b75085dc40":{"name":"tags","value":{"Name":"\"${var.project_name}-${var.environment}-service\""},"valueType":"map","path":"tags","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"73704922-256a-4228-88ce-a897b72cbdb9":{"name":"task_definition","value":"aws_ecs_task_definition.main.arn","valueType":"string","path":"task_definition","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"2dbb3fe9-44a7-4ad3-8055-b94278138353":{"name":"deployment_maximum_percent","value":200,"valueType":"number","path":"deployment_maximum_percent","editMode":0,"order":6,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"a18b54ef-b9ef-4562-aa83-ba2d3b9bd9ef":{"name":"security_groups","value":["aws_security_group.ecs_tasks.id"],"valueType":"list","path":"network_configuration.security_groups","editMode":0,"order":1,"blockId":"ca8ca236-c918-4261-a448-9462eafaf711","inherited":false},"e47199e6-9669-4a8f-811d-090a56dc90d5":{"name":"cluster","value":"aws_ecs_cluster.main.id","valueType":"string","path":"cluster","editMode":0,"order":8,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"5e81f33a-05ae-4309-9e8d-6a2a119a4b06":{"name":"assign_public_ip","value":false,"valueType":"bool","path":"network_configuration.assign_public_ip","editMode":0,"order":2,"blockId":"ca8ca236-c918-4261-a448-9462eafaf711","inherited":false},"ab20a8e2-31c1-4a5e-ac97-a125fe2b13b1":{"name":"deployment_minimum_healthy_percent","value":50,"valueType":"number","path":"deployment_minimum_healthy_percent","editMode":0,"order":5,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"ca8ca236-c918-4261-a448-9462eafaf711":{"name":"network_configuration","value":null,"valueType":"block","path":"network_configuration","editMode":0,"order":9,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"bdd284bf-bd49-45c2-9a80-8a631a958eca":{"name":"lifecycle","value":null,"valueType":"block","path":"lifecycle","editMode":0,"order":11,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"37ecbed1-2736-42ad-bd46-eac233ba980c":{"name":"subnets","value":"aws_subnet.private[*].id","valueType":"string","path":"network_configuration.subnets","editMode":0,"order":0,"blockId":"ca8ca236-c918-4261-a448-9462eafaf711","inherited":false},"8e476fc3-0f89-4876-81d3-8590f0634bb9":{"name":"launch_type","value":"FARGATE","valueType":"string","path":"launch_type","editMode":0,"order":3,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"2bd15b6f-1481-4ded-953c-0e83ced31b29":{"name":"load_balancer","value":null,"valueType":"block","path":"load_balancer","editMode":0,"order":10,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"96d587f5-278c-4e54-81b0-bfdf31f4c9f3":{"name":"desired_count","value":"var.desired_count","valueType":"string","path":"desired_count","editMode":0,"order":4,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"207902b1-6657-4d75-95bf-e145b4f09666":{"uuid":"207902b1-6657-4d75-95bf-e145b4f09666","metadata":{"iac":{"blockType":"data","resourceType":"aws_iam_policy_document","resourceName":"ecs_execution_secrets","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"iam","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":39,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":120,"y":440,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"1ccca40a-d0c5-4a78-b75e-be99046e1b7b":{"name":"statement","value":null,"valueType":"block","path":"statement","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"35f0a9eb-dce1-46e4-b055-987172a2dee8":{"name":"resources","value":["aws_secretsmanager_secret.app_secrets.arn","aws_kms_key.secrets.arn"],"valueType":"list","path":"statement.resources","editMode":0,"order":0,"blockId":"1ccca40a-d0c5-4a78-b75e-be99046e1b7b","inherited":false},"a9d6d341-c47c-4046-aa18-0e5f85258552":{"name":"effect","value":"Allow","valueType":"string","path":"statement.effect","editMode":0,"order":1,"blockId":"1ccca40a-d0c5-4a78-b75e-be99046e1b7b","inherited":false},"1601e9a1-3315-4ab7-96ee-8a33e0545f02":{"name":"actions","value":["secretsmanager:GetSecretValue","kms:Decrypt"],"valueType":"list","path":"statement.actions","editMode":0,"order":2,"blockId":"1ccca40a-d0c5-4a78-b75e-be99046e1b7b","inherited":false}}},"6adc970b-736c-4cb7-a808-6a9a5fec375c":{"uuid":"6adc970b-736c-4cb7-a808-6a9a5fec375c","metadata":{"iac":{"blockType":"data","resourceType":"aws_iam_policy_document","resourceName":"secrets_kms_policy","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"secrets","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":44,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":920,"y":280,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"0a0229a5-1cfc-4279-83ca-a62a41cbf7e3":{"name":"type","value":"AWS","valueType":"string","path":"statement.principals.type","editMode":0,"order":0,"blockId":"20b256a9-38b5-41d8-a2f4-225f09314a8a","inherited":false},"29e6124b-466e-47cb-a15d-235ef409af92":{"name":"resources","value":["*"],"valueType":"list","path":"statement.resources","editMode":0,"order":1,"blockId":"3b9c50bd-0275-4222-b6bd-6a038db7416f","inherited":false},"adbebf8b-77b2-4e9a-91bb-86e2d0d35d31":{"name":"resources","value":["*"],"valueType":"list","path":"statement.resources","editMode":0,"order":1,"blockId":"4713ddcb-f3cc-4aec-a84f-79e6ec489b09","inherited":false},"7b01a711-31d1-44df-ac56-a22d10207589":{"name":"actions","value":["kms:*"],"valueType":"list","path":"statement.actions","editMode":0,"order":3,"blockId":"4713ddcb-f3cc-4aec-a84f-79e6ec489b09","inherited":false},"770ba5fa-ff6e-4304-9967-c307fa778201":{"name":"type","value":"AWS","valueType":"string","path":"statement.principals.type","editMode":0,"order":0,"blockId":"b3a47904-9712-4df6-8540-0fe88a5a6770","inherited":false},"a7bfba46-5300-41ee-8c56-7802c4b85a1f":{"name":"identifiers","value":["aws_iam_role.ecs_task_execution.arn"],"valueType":"list","path":"statement.principals.identifiers","editMode":0,"order":1,"blockId":"20b256a9-38b5-41d8-a2f4-225f09314a8a","inherited":false},"83777391-b930-4c06-bce4-259c4bd24514":{"name":"sid","value":"Allow ECS Task Execution Role to Decrypt Secrets","valueType":"string","path":"statement.sid","editMode":0,"order":0,"blockId":"97130e45-2cfe-4141-b482-f4fbea13ce6c","inherited":false},"9a62ceda-a70c-4c67-8c11-717e7d6fc8cf":{"name":"resources","value":["*"],"valueType":"list","path":"statement.resources","editMode":0,"order":1,"blockId":"97130e45-2cfe-4141-b482-f4fbea13ce6c","inherited":false},"20b256a9-38b5-41d8-a2f4-225f09314a8a":{"name":"principals","value":null,"valueType":"block","path":"statement.principals","editMode":0,"order":4,"blockId":"97130e45-2cfe-4141-b482-f4fbea13ce6c","inherited":false},"3b9c50bd-0275-4222-b6bd-6a038db7416f":{"name":"statement","value":null,"valueType":"block","path":"statement","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"4b324760-3cf5-415d-9d80-a73552169f9d":{"name":"sid","value":"Enable IAM User Permissions","valueType":"string","path":"statement.sid","editMode":0,"order":0,"blockId":"4713ddcb-f3cc-4aec-a84f-79e6ec489b09","inherited":false},"d948b30c-b0de-4607-81d8-bc8e12e4f088":{"name":"actions","value":["kms:Decrypt","kms:GenerateDataKey","kms:CreateGrant"],"valueType":"list","path":"statement.actions","editMode":0,"order":3,"blockId":"3b9c50bd-0275-4222-b6bd-6a038db7416f","inherited":false},"b3a47904-9712-4df6-8540-0fe88a5a6770":{"name":"principals","value":null,"valueType":"block","path":"statement.principals","editMode":0,"order":4,"blockId":"4713ddcb-f3cc-4aec-a84f-79e6ec489b09","inherited":false},"1e7823de-8661-48e3-a871-fabaacd4bb67":{"name":"actions","value":["kms:Decrypt","kms:DescribeKey","kms:GenerateDataKey"],"valueType":"list","path":"statement.actions","editMode":0,"order":3,"blockId":"97130e45-2cfe-4141-b482-f4fbea13ce6c","inherited":false},"755843f9-a446-4e90-86b3-2d132907996d":{"name":"type","value":"Service","valueType":"string","path":"statement.principals.type","editMode":0,"order":0,"blockId":"fe71acab-5088-45ae-9ca7-73c6ea094642","inherited":false},"baaca7da-5357-4a6c-b345-60968f21c7b4":{"name":"identifiers","value":["\"arn:aws:iam::${data.aws_caller_identity.current.account_id}:root\""],"valueType":"list","path":"statement.principals.identifiers","editMode":0,"order":1,"blockId":"b3a47904-9712-4df6-8540-0fe88a5a6770","inherited":false},"91fb2b61-b6ae-4c73-a364-8f4b41e77791":{"name":"effect","value":"Allow","valueType":"string","path":"statement.effect","editMode":0,"order":2,"blockId":"3b9c50bd-0275-4222-b6bd-6a038db7416f","inherited":false},"97130e45-2cfe-4141-b482-f4fbea13ce6c":{"name":"statement","value":null,"valueType":"block","path":"statement","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"c315b975-d424-4eb9-a8ee-100957587a52":{"name":"values","value":["\"secretsmanager.${var.aws_region}.amazonaws.com\""],"valueType":"list","path":"statement.condition.values","editMode":0,"order":1,"blockId":"5e5c33c6-a8de-4398-a475-a1a926903731","inherited":false},"9cf4baa5-de06-4099-8898-0c8bf5257cc2":{"name":"effect","value":"Allow","valueType":"string","path":"statement.effect","editMode":0,"order":2,"blockId":"4713ddcb-f3cc-4aec-a84f-79e6ec489b09","inherited":false},"498ed984-b979-44de-b910-c17fab622216":{"name":"sid","value":"Allow Secrets Manager to Use Key","valueType":"string","path":"statement.sid","editMode":0,"order":0,"blockId":"3b9c50bd-0275-4222-b6bd-6a038db7416f","inherited":false},"dcb64b16-6a6b-4441-b4c5-057b3fe78455":{"name":"identifiers","value":["secretsmanager.amazonaws.com"],"valueType":"list","path":"statement.principals.identifiers","editMode":0,"order":1,"blockId":"fe71acab-5088-45ae-9ca7-73c6ea094642","inherited":false},"5e5c33c6-a8de-4398-a475-a1a926903731":{"name":"condition","value":null,"valueType":"block","path":"statement.condition","editMode":0,"order":5,"blockId":"3b9c50bd-0275-4222-b6bd-6a038db7416f","inherited":false},"469566b0-7ea4-4acf-b3ba-4abe74c23f0d":{"name":"variable","value":"kms:ViaService","valueType":"string","path":"statement.condition.variable","editMode":0,"order":0,"blockId":"5e5c33c6-a8de-4398-a475-a1a926903731","inherited":false},"4a19d31f-4a66-4852-9c85-9d3bcd55701c":{"name":"test","value":"StringEquals","valueType":"string","path":"statement.condition.test","editMode":0,"order":2,"blockId":"5e5c33c6-a8de-4398-a475-a1a926903731","inherited":false},"eef048bf-c9cc-413d-913a-3e3378c2c846":{"name":"effect","value":"Allow","valueType":"string","path":"statement.effect","editMode":0,"order":2,"blockId":"97130e45-2cfe-4141-b482-f4fbea13ce6c","inherited":false},"4713ddcb-f3cc-4aec-a84f-79e6ec489b09":{"name":"statement","value":null,"valueType":"block","path":"statement","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"fe71acab-5088-45ae-9ca7-73c6ea094642":{"name":"principals","value":null,"valueType":"block","path":"statement.principals","editMode":0,"order":4,"blockId":"3b9c50bd-0275-4222-b6bd-6a038db7416f","inherited":false}}},"712d519a-0b89-424d-a231-6600d3515553":{"uuid":"712d519a-0b89-424d-a231-6600d3515553","metadata":{"iac":{"blockType":"resource","resourceType":"aws_kms_key","resourceName":"cloudwatch","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"ecs","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":4,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":1080,"y":120,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"c96ab248-823a-4c7e-af01-8766bbfa5066":{"name":"enable_key_rotation","value":true,"valueType":"bool","path":"enable_key_rotation","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"2e06b119-4fb8-4ac6-9067-a4dba9d022a8":{"name":"description","value":"KMS key for ECS CloudWatch logs","valueType":"string","path":"description","editMode":0,"order":3,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"30812a15-d54b-418e-90cb-b39808507bb8":{"name":"deletion_window_in_days","value":7,"valueType":"number","path":"deletion_window_in_days","editMode":0,"order":4,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"c261bf51-17c7-4704-8dd0-da2531a636e4":{"name":"tags","value":{"Name":"\"${var.project_name}-${var.environment}-cloudwatch-kms\""},"valueType":"map","path":"tags","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"672f08b0-f8bc-4411-9bbf-54111aba8671":{"name":"policy","value":"data.aws_iam_policy_document.cloudwatch_kms_policy.json","valueType":"string","path":"policy","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"f5f68808-300c-4eb8-9170-fcface54d984":{"uuid":"f5f68808-300c-4eb8-9170-fcface54d984","metadata":{"iac":{"blockType":"resource","resourceType":"aws_cloudwatch_log_group","resourceName":"vpc_flow_log","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"networking","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":26,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":600,"y":440,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"b0f486f0-c5a0-4cdf-87ec-3fb68a016879":{"name":"kms_key_id","value":"aws_kms_key.cloudwatch.arn","valueType":"string","path":"kms_key_id","editMode":0,"order":3,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"5908dd39-6cc5-49fe-bb6b-bf701f5a5e99":{"name":"tags","value":{"Name":"\"${var.project_name}-${var.environment}-vpc-flow-logs\""},"valueType":"map","path":"tags","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"9e8abb09-72dd-4e40-aa9e-3013ab234d89":{"name":"retention_in_days","value":30,"valueType":"number","path":"retention_in_days","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"9cc43f04-4aa8-4a28-a954-e617b027476f":{"name":"name","value":"\"/aws/vpc-flow-logs/${var.project_name}-${var.environment}\"","valueType":"string","path":"name","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"f2ef1ab0-d859-4843-bdc2-0a7303a97e44":{"uuid":"f2ef1ab0-d859-4843-bdc2-0a7303a97e44","metadata":{"iac":{"blockType":"resource","resourceType":"aws_ecs_cluster","resourceName":"main","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"ecs","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":7,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":440,"y":760,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"f5588987-6e9a-4340-b2e9-4e8187ebb338":{"name":"value","value":"enabled","valueType":"string","path":"setting.value","editMode":0,"order":0,"blockId":"299ab3ad-88cc-4661-929d-1cf930a474f2","inherited":false},"36165edd-757a-4f61-b8a4-e154a96040b8":{"name":"name","value":"containerInsights","valueType":"string","path":"setting.name","editMode":0,"order":1,"blockId":"299ab3ad-88cc-4661-929d-1cf930a474f2","inherited":false},"50d63fba-3a76-4f0e-8afd-3ee5de960e5d":{"name":"tags","value":{"Name":"\"${var.project_name}-${var.environment}-cluster\""},"valueType":"map","path":"tags","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"0c3d60c9-4e1d-454c-bfeb-7d95311e42f2":{"name":"name","value":"\"${var.project_name}-${var.environment}-cluster\"","valueType":"string","path":"name","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"299ab3ad-88cc-4661-929d-1cf930a474f2":{"name":"setting","value":null,"valueType":"block","path":"setting","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"3393f8f1-9096-4bb0-95a7-06b4e8a2cd5d":{"uuid":"3393f8f1-9096-4bb0-95a7-06b4e8a2cd5d","metadata":{"iac":{"blockType":"resource","resourceType":"aws_iam_role_policy","resourceName":"ecs_task_logs","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"iam","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":15,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":280,"y":120,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"d4e1933e-0d02-44be-b947-2aa5e531d139":{"name":"policy","value":"data.aws_iam_policy_document.ecs_task_logs.json","valueType":"string","path":"policy","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"c31d4e4a-5980-46c8-ba72-012b9217f7be":{"name":"name","value":"\"${var.project_name}-${var.environment}-task-logs-policy\"","valueType":"string","path":"name","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"104fd701-fa36-4503-905a-c0713b10ceb6":{"name":"role","value":"aws_iam_role.ecs_task.id","valueType":"string","path":"role","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"b65070fb-a8c7-44b9-918b-5d44456bafca":{"uuid":"b65070fb-a8c7-44b9-918b-5d44456bafca","metadata":{"iac":{"blockType":"resource","resourceType":"aws_iam_role_policy_attachment","resourceName":"ecs_task_execution","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"iam","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":11,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":920,"y":120,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"70d5c6af-e5a2-43ed-9d28-650a1fdf9160":{"name":"policy_arn","value":"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy","valueType":"string","path":"policy_arn","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"eb9d609a-0d90-4189-ac20-b2e43208c96b":{"name":"role","value":"aws_iam_role.ecs_task_execution.name","valueType":"string","path":"role","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"b16814e8-9f50-4528-8a5d-2ac30779212a":{"uuid":"b16814e8-9f50-4528-8a5d-2ac30779212a","metadata":{"iac":{"blockType":"resource","resourceType":"aws_iam_role_policy","resourceName":"ecs_execution_logs","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"iam","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":13,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":760,"y":280,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"984aeeb3-0ea2-461c-bf73-e4ac721a724c":{"name":"role","value":"aws_iam_role.ecs_task_execution.id","valueType":"string","path":"role","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"ba5598e8-7560-4eb4-aaa6-4012fd27683f":{"name":"policy","value":"data.aws_iam_policy_document.ecs_execution_logs.json","valueType":"string","path":"policy","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"2f4df19c-3a97-4022-aa3d-56c34bdc4d2d":{"name":"name","value":"\"${var.project_name}-${var.environment}-execution-logs-policy\"","valueType":"string","path":"name","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"a6246fee-0118-4390-b402-1746ed81393d":{"uuid":"a6246fee-0118-4390-b402-1746ed81393d","metadata":{"iac":{"blockType":"resource","resourceType":"aws_iam_role","resourceName":"vpc_flow_log","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"networking","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":28,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":280,"y":600,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"3d2a1d81-0898-4b88-8e4e-b84ab7c2b76c":{"name":"assume_role_policy","value":"jsonencode({\n    Version = \"2012-10-17\"\n    Statement = [{\n      Action = \"sts:AssumeRole\"\n      Effect = \"Allow\"\n      Principal = {\n        Service = \"vpc-flow-logs.amazonaws.com\"\n      }\n    }]\n  })","valueType":"string","path":"assume_role_policy","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"40b30333-ff6a-44b2-be1a-74eb429ac5fa":{"name":"tags","value":{"Name":"\"${var.project_name}-${var.environment}-vpc-flow-log-role\""},"valueType":"map","path":"tags","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"26a9a10e-2cd1-4b0f-8c72-a5ca1eb8aef1":{"name":"name","value":"\"${var.project_name}-${var.environment}-vpc-flow-log-role\"","valueType":"string","path":"name","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"f72302b7-5597-419d-b661-fcbb6270c1a1":{"uuid":"f72302b7-5597-419d-b661-fcbb6270c1a1","metadata":{"iac":{"blockType":"data","resourceType":"aws_iam_policy_document","resourceName":"ecs_task_logs","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"iam","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":41,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":120,"y":120,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"3be5901d-3d85-41a5-970c-534a4b3ab710":{"name":"statement","value":null,"valueType":"block","path":"statement","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"fb4e1103-4f93-42d5-acf1-116ee5a9362b":{"name":"resources","value":["aws_kms_key.cloudwatch.arn"],"valueType":"list","path":"statement.resources","editMode":0,"order":0,"blockId":"3be5901d-3d85-41a5-970c-534a4b3ab710","inherited":false},"75b7639b-68e8-42e5-a29f-b050bf6e3e5f":{"name":"effect","value":"Allow","valueType":"string","path":"statement.effect","editMode":0,"order":1,"blockId":"3be5901d-3d85-41a5-970c-534a4b3ab710","inherited":false},"71656754-abd3-4f82-a17f-926ef418e46d":{"name":"actions","value":["kms:Decrypt","kms:GenerateDataKey"],"valueType":"list","path":"statement.actions","editMode":0,"order":2,"blockId":"3be5901d-3d85-41a5-970c-534a4b3ab710","inherited":false},"b5c29af8-312f-471c-9708-74628385c996":{"name":"statement","value":null,"valueType":"block","path":"statement","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"f8cd94dd-f79d-4ccf-b524-ac07253742b0":{"name":"resources","value":["\"${aws_cloudwatch_log_group.ecs.arn}:log-stream:*\""],"valueType":"list","path":"statement.resources","editMode":0,"order":0,"blockId":"b5c29af8-312f-471c-9708-74628385c996","inherited":false},"444ab580-30e2-4d98-bf1d-76e991186f29":{"name":"effect","value":"Allow","valueType":"string","path":"statement.effect","editMode":0,"order":1,"blockId":"b5c29af8-312f-471c-9708-74628385c996","inherited":false},"5e7248dc-d3a5-45c5-beb4-58e080e1da04":{"name":"actions","value":["logs:CreateLogStream","logs:PutLogEvents"],"valueType":"list","path":"statement.actions","editMode":0,"order":2,"blockId":"b5c29af8-312f-471c-9708-74628385c996","inherited":false}}},"9aaee689-5d57-45bd-a540-13a6deef3e3c":{"uuid":"9aaee689-5d57-45bd-a540-13a6deef3e3c","metadata":{"iac":{"blockType":"resource","resourceType":"aws_lb","resourceName":"main","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"alb","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":1,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":1200,"y":720,"zIndex":4,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"61ad82c1-ef4d-4345-aabd-ea0b040bcce3":{"name":"name","value":"\"${var.project_name}-${var.environment}-alb\"","valueType":"string","path":"name","editMode":0,"order":3,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"333c3702-e631-4c32-a7b3-5266797766f6":{"name":"load_balancer_type","value":"application","valueType":"string","path":"load_balancer_type","editMode":0,"order":4,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"65a2e600-d9ad-411a-be6e-b485c22f384f":{"name":"internal","value":false,"valueType":"bool","path":"internal","editMode":0,"order":5,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"22ce7104-9dc6-4dec-8243-848f73a6f336":{"name":"enable_deletion_protection","value":false,"valueType":"bool","path":"enable_deletion_protection","editMode":0,"order":6,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"d4b29395-578f-472f-b65b-543a7f4001b0":{"name":"drop_invalid_header_fields","value":true,"valueType":"bool","path":"drop_invalid_header_fields","editMode":0,"order":7,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"692a533f-bba6-4a2d-a01d-818de9598576":{"name":"tags","value":{"Name":"\"${var.project_name}-${var.environment}-alb\""},"valueType":"map","path":"tags","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"071f880f-1d53-4097-ada6-cd9a071a87be":{"name":"subnets","value":"aws_subnet.public[*].id","valueType":"string","path":"subnets","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"7786874d-1577-4cf2-b18a-28bb821ea41e":{"name":"security_groups","value":["aws_security_group.alb.id"],"valueType":"list","path":"security_groups","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"1f920ed8-d16d-49fd-b466-959ed27b9e55":{"uuid":"1f920ed8-d16d-49fd-b466-959ed27b9e55","metadata":{"iac":{"blockType":"data","resourceType":"aws_iam_policy_document","resourceName":"ecs_task_assume_role","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"iam","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":38,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":600,"y":120,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"d035ec78-11eb-4eeb-a588-c2c9fe847e0b":{"name":"statement","value":null,"valueType":"block","path":"statement","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"f15b6f29-5f1c-4857-9332-7ad238cc7934":{"name":"actions","value":["sts:AssumeRole"],"valueType":"list","path":"statement.actions","editMode":0,"order":0,"blockId":"d035ec78-11eb-4eeb-a588-c2c9fe847e0b","inherited":false},"a551e6ab-513c-4788-b93d-84e263f6beed":{"name":"principals","value":null,"valueType":"block","path":"statement.principals","editMode":0,"order":1,"blockId":"d035ec78-11eb-4eeb-a588-c2c9fe847e0b","inherited":false},"2ebec7bb-120c-4ba7-8971-fde479d12220":{"name":"type","value":"Service","valueType":"string","path":"statement.principals.type","editMode":0,"order":0,"blockId":"a551e6ab-513c-4788-b93d-84e263f6beed","inherited":false},"070b96ad-1915-469f-bdaa-f5018ea6a21b":{"name":"identifiers","value":["ecs-tasks.amazonaws.com"],"valueType":"list","path":"statement.principals.identifiers","editMode":0,"order":1,"blockId":"a551e6ab-513c-4788-b93d-84e263f6beed","inherited":false}}},"af58e92b-d3f5-4367-92d6-1435b8bbb3fd":{"uuid":"af58e92b-d3f5-4367-92d6-1435b8bbb3fd","metadata":{"iac":{"blockType":"resource","resourceType":"aws_ecs_task_definition","resourceName":"main","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"ecs","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":8,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":1400,"y":120,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"944bea51-7ef7-48ff-83cb-b94a0dbcf871":{"name":"task_role_arn","value":"aws_iam_role.ecs_task.arn","valueType":"string","path":"task_role_arn","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"be159aab-2963-4c86-a92c-81569fa09e17":{"name":"requires_compatibilities","value":["FARGATE"],"valueType":"list","path":"requires_compatibilities","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"cdee79b7-758f-4934-a461-6b496c16f46e":{"name":"depends_on","value":["aws_cloudwatch_log_group.ecs","aws_iam_role_policy.ecs_execution_secrets","aws_iam_role_policy.ecs_execution_logs"],"valueType":"list","path":"depends_on","editMode":0,"order":7,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"5f13c15b-7b73-470a-bc93-7890981c79d7":{"name":"tags","value":{"Name":"\"${var.project_name}-${var.environment}-task\""},"valueType":"map","path":"tags","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"e6edab3e-aea1-42f0-9305-4f5c61a15e1d":{"name":"memory","value":"var.memory","valueType":"string","path":"memory","editMode":0,"order":4,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"7735edc8-e831-4da3-8e1d-4ef414440aca":{"name":"execution_role_arn","value":"aws_iam_role.ecs_task_execution.arn","valueType":"string","path":"execution_role_arn","editMode":0,"order":6,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"bec78ead-1cce-4bb8-ab8c-739b787cf4db":{"name":"network_mode","value":"awsvpc","valueType":"string","path":"network_mode","editMode":0,"order":3,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"c32a56c7-3b1c-4329-a5ba-71942ad3f84c":{"name":"family","value":"\"${var.project_name}-${var.environment}-task\"","valueType":"string","path":"family","editMode":0,"order":5,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"d2dd3ded-daaf-4322-9708-d7e12f786c2a":{"name":"cpu","value":"var.cpu","valueType":"string","path":"cpu","editMode":0,"order":8,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"fccee3aa-251e-4803-861e-464891e12019":{"name":"container_definitions","value":"jsonencode([\n    {\n      name      = \"${var.project_name}-container\"\n      image     = var.container_image\n      essential = true\n\n      portMappings = [\n        {\n          containerPort = var.container_port\n          protocol      = \"tcp\"\n        }\n      ]\n\n      environment = var.app_environment_variables\n\n      secrets = [\n        {\n          name      = \"STRIPE_SECRET_KEY\"\n          valueFrom = \"${aws_secretsmanager_secret.app_secrets.arn}:STRIPE_SECRET_KEY::\"\n        },\n        {\n          name      = \"OPENAI_API_KEY\"\n          valueFrom = \"${aws_secretsmanager_secret.app_secrets.arn}:OPENAI_API_KEY::\"\n        },\n        {\n          name      = \"DATABASE_URL\"\n          valueFrom = \"${aws_secretsmanager_secret.app_secrets.arn}:DATABASE_URL::\"\n        }\n      ]\n\n      logConfiguration = {\n        logDriver = \"awslogs\"\n        options = {\n          awslogs-group         = aws_cloudwatch_log_group.ecs.name\n          awslogs-region        = var.aws_region\n          awslogs-stream-prefix = \"ecs\"\n        }\n      }\n    }\n  ])","valueType":"string","path":"container_definitions","editMode":0,"order":9,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"cb069311-7dc1-4899-887c-36a153b0cb4e":{"uuid":"cb069311-7dc1-4899-887c-36a153b0cb4e","metadata":{"iac":{"blockType":"data","resourceType":"aws_caller_identity","resourceName":"current","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"ecs","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":36,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":1080,"y":280,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{}},"5ecaa37f-fa55-4164-a5ad-ab6dba9e27dd":{"uuid":"5ecaa37f-fa55-4164-a5ad-ab6dba9e27dd","metadata":{"iac":{"blockType":"data","resourceType":"aws_iam_policy_document","resourceName":"ecs_execution_logs","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"iam","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":40,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":600,"y":280,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"e349b90e-c141-4340-98f5-a819a8fa7c9a":{"name":"statement","value":null,"valueType":"block","path":"statement","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"47509e31-6e94-4e35-8ba9-34c4edaf2299":{"name":"resources","value":["\"${aws_cloudwatch_log_group.ecs.arn}:*\""],"valueType":"list","path":"statement.resources","editMode":0,"order":0,"blockId":"e349b90e-c141-4340-98f5-a819a8fa7c9a","inherited":false},"4685d51f-ef10-4be5-b84a-51c8a14daca7":{"name":"effect","value":"Allow","valueType":"string","path":"statement.effect","editMode":0,"order":1,"blockId":"e349b90e-c141-4340-98f5-a819a8fa7c9a","inherited":false},"f282de3d-3e2d-46e3-87c5-94a206e5d41f":{"name":"actions","value":["logs:CreateLogStream","logs:PutLogEvents"],"valueType":"list","path":"statement.actions","editMode":0,"order":2,"blockId":"e349b90e-c141-4340-98f5-a819a8fa7c9a","inherited":false},"bbed2f22-bfea-448e-ac18-f88878c1664c":{"name":"statement","value":null,"valueType":"block","path":"statement","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"c0dc7081-5f28-484f-b8f0-2bd63941596d":{"name":"resources","value":["aws_kms_key.cloudwatch.arn"],"valueType":"list","path":"statement.resources","editMode":0,"order":0,"blockId":"bbed2f22-bfea-448e-ac18-f88878c1664c","inherited":false},"e6a104a6-fdb3-4c28-9534-3b5eb7d0ec64":{"name":"effect","value":"Allow","valueType":"string","path":"statement.effect","editMode":0,"order":1,"blockId":"bbed2f22-bfea-448e-ac18-f88878c1664c","inherited":false},"fe65b1ee-e21d-4c69-ad1e-bea7fee28f00":{"name":"actions","value":["kms:Decrypt","kms:GenerateDataKey"],"valueType":"list","path":"statement.actions","editMode":0,"order":2,"blockId":"bbed2f22-bfea-448e-ac18-f88878c1664c","inherited":false}}},"1df0d016-9025-491b-81fb-6df3befdea2d":{"uuid":"1df0d016-9025-491b-81fb-6df3befdea2d","metadata":{"iac":{"blockType":"resource","resourceType":"aws_iam_role","resourceName":"ecs_task_execution","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"iam","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":10,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":760,"y":120,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"284fe263-e48f-4064-a6f1-fe78a84148b2":{"name":"name","value":"\"${var.project_name}-${var.environment}-ecs-task-execution-role\"","valueType":"string","path":"name","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"2741aac6-e279-4752-8ee7-68a6c80d13e0":{"name":"assume_role_policy","value":"data.aws_iam_policy_document.ecs_task_assume_role.json","valueType":"string","path":"assume_role_policy","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"e68c9676-89ea-4b6e-8774-28fb9aa9435d":{"uuid":"e68c9676-89ea-4b6e-8774-28fb9aa9435d","metadata":{"iac":{"blockType":"resource","resourceType":"aws_iam_role_policy","resourceName":"vpc_flow_log","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"networking","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":29,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":920,"y":440,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"aaa71bc7-b5a8-4ee0-bc89-fdeaf373be57":{"name":"role","value":"aws_iam_role.vpc_flow_log.id","valueType":"string","path":"role","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"d7e2dd71-1ece-47cb-8cc7-bdf3592e1292":{"name":"policy","value":"data.aws_iam_policy_document.vpc_flow_logs.json","valueType":"string","path":"policy","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"75f647b5-dd62-4d13-bddb-9f0420313d68":{"name":"name","value":"\"${var.project_name}-${var.environment}-vpc-flow-log-policy\"","valueType":"string","path":"name","editMode":0,"order":2,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false}}},"66293e25-5096-4c01-8a4f-1735f6dc5b40":{"uuid":"66293e25-5096-4c01-8a4f-1735f6dc5b40","metadata":{"iac":{"blockType":"data","resourceType":"aws_iam_policy_document","resourceName":"cloudwatch_kms_policy","cloudProvider":"aws","cloudProviderSource":null,"providerAlias":null,"customCode":null,"fileName":"ecs","hideFromCode":false,"isCustom":false,"moduleId":"00000000-0000-0000-0000-000000000000","order":37,"region":"us-east-1"},"graphics":{"bbFileId":"00000000-0000-0000-0000-000000000000","iconOnly":false,"isContainer":false}},"graphics":{"width":60,"height":60,"x":1240,"y":280,"zIndex":2,"isLocked":false,"borderRadius":6,"children":[],"opacity":1},"cloudConfigs":{"6264f750-23ca-42ae-a31d-e1da5b58116a":{"name":"values","value":["\"arn:aws:logs:${var.aws_region}:${data.aws_caller_identity.current.account_id}:*\""],"valueType":"list","path":"statement.condition.values","editMode":0,"order":1,"blockId":"183faed5-84a6-447e-b94a-6156fb876917","inherited":false},"56764dfb-56d6-464c-a51c-d03aac0a9e8a":{"name":"statement","value":null,"valueType":"block","path":"statement","editMode":0,"order":0,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"e22e1385-f439-4a28-8557-e7168a7deee2":{"name":"effect","value":"Allow","valueType":"string","path":"statement.effect","editMode":0,"order":2,"blockId":"56764dfb-56d6-464c-a51c-d03aac0a9e8a","inherited":false},"91744487-018f-4c61-a0e9-057b3f9cf6ff":{"name":"principals","value":null,"valueType":"block","path":"statement.principals","editMode":0,"order":4,"blockId":"00b4cac5-fc15-4648-9338-d1d67e5fe1c2","inherited":false},"8a8b9943-556e-48b1-a960-2aa44db756ab":{"name":"actions","value":["kms:*"],"valueType":"list","path":"statement.actions","editMode":0,"order":3,"blockId":"56764dfb-56d6-464c-a51c-d03aac0a9e8a","inherited":false},"bdbd4a67-1aff-4727-b3b6-7ad7c0b0b827":{"name":"principals","value":null,"valueType":"block","path":"statement.principals","editMode":0,"order":4,"blockId":"56764dfb-56d6-464c-a51c-d03aac0a9e8a","inherited":false},"e2e93c8f-1e11-4206-8104-f875e9bf3fe8":{"name":"resources","value":["*"],"valueType":"list","path":"statement.resources","editMode":0,"order":1,"blockId":"00b4cac5-fc15-4648-9338-d1d67e5fe1c2","inherited":false},"183faed5-84a6-447e-b94a-6156fb876917":{"name":"condition","value":null,"valueType":"block","path":"statement.condition","editMode":0,"order":5,"blockId":"00b4cac5-fc15-4648-9338-d1d67e5fe1c2","inherited":false},"41e7f22f-703d-44c7-a7d3-9c956cb2ca1f":{"name":"resources","value":["*"],"valueType":"list","path":"statement.resources","editMode":0,"order":1,"blockId":"56764dfb-56d6-464c-a51c-d03aac0a9e8a","inherited":false},"89e74292-661b-4085-8ede-bea14731257e":{"name":"sid","value":"AllowRootAccount","valueType":"string","path":"statement.sid","editMode":0,"order":0,"blockId":"56764dfb-56d6-464c-a51c-d03aac0a9e8a","inherited":false},"36a303d2-c8d3-4b3d-841a-b8adefabdc61":{"name":"sid","value":"AllowCloudWatchLogs","valueType":"string","path":"statement.sid","editMode":0,"order":0,"blockId":"00b4cac5-fc15-4648-9338-d1d67e5fe1c2","inherited":false},"a4c799e1-0f08-4368-9af9-61b5e9458a07":{"name":"actions","value":["kms:Encrypt","kms:Decrypt","kms:ReEncrypt*","kms:GenerateDataKey*","kms:CreateGrant","kms:DescribeKey"],"valueType":"list","path":"statement.actions","editMode":0,"order":3,"blockId":"00b4cac5-fc15-4648-9338-d1d67e5fe1c2","inherited":false},"fc42a10c-f270-4a06-936b-4866c8712d83":{"name":"identifiers","value":["\"arn:aws:iam::${data.aws_caller_identity.current.account_id}:root\""],"valueType":"list","path":"statement.principals.identifiers","editMode":0,"order":1,"blockId":"bdbd4a67-1aff-4727-b3b6-7ad7c0b0b827","inherited":false},"f4cd0787-e24d-45a0-be58-4123e6ff1b28":{"name":"variable","value":"kms:EncryptionContext:aws:logs:arn","valueType":"string","path":"statement.condition.variable","editMode":0,"order":0,"blockId":"183faed5-84a6-447e-b94a-6156fb876917","inherited":false},"124b3e61-0421-440d-b23d-1af60640449f":{"name":"type","value":"AWS","valueType":"string","path":"statement.principals.type","editMode":0,"order":0,"blockId":"bdbd4a67-1aff-4727-b3b6-7ad7c0b0b827","inherited":false},"00b4cac5-fc15-4648-9338-d1d67e5fe1c2":{"name":"statement","value":null,"valueType":"block","path":"statement","editMode":0,"order":1,"blockId":"00000000-0000-0000-0000-000000000000","inherited":false},"90430f9b-a028-409d-b535-48d181f492e1":{"name":"type","value":"Service","valueType":"string","path":"statement.principals.type","editMode":0,"order":0,"blockId":"91744487-018f-4c61-a0e9-057b3f9cf6ff","inherited":false},"106e601f-ff18-4966-a9eb-39d8eda35df0":{"name":"test","value":"ArnLike","valueType":"string","path":"statement.condition.test","editMode":0,"order":2,"blockId":"183faed5-84a6-447e-b94a-6156fb876917","inherited":false},"10e9c69f-6b0a-421a-99c0-7a0956bd1d80":{"name":"effect","value":"Allow","valueType":"string","path":"statement.effect","editMode":0,"order":2,"blockId":"00b4cac5-fc15-4648-9338-d1d67e5fe1c2","inherited":false},"551668e4-65e1-442f-b5b6-8cc3ebb51d5b":{"name":"identifiers","value":["\"logs.${var.aws_region}.amazonaws.com\""],"valueType":"list","path":"statement.principals.identifiers","editMode":0,"order":1,"blockId":"91744487-018f-4c61-a0e9-057b3f9cf6ff","inherited":false}}}},"connectors":{"217e56e9-432a-47b5-a34d-0f0384c3bf39":{"automatic":true,"metadata":{"terraform_reference":"security_groups"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"security_groups","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"9aaee689-5d57-45bd-a540-13a6deef3e3c","anchor":"automatic"}},{"node":{"id":"617ba6b6-0880-46be-85a5-6eb29e691874","anchor":"automatic"}}]},"a3bec4df-66d3-4b34-abd9-93af797031bd":{"automatic":true,"metadata":{"terraform_reference":"policy"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"policy","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"e36d9a18-95d3-4dce-be34-c1321323c123","anchor":"automatic"}},{"node":{"id":"207902b1-6657-4d75-95bf-e145b4f09666","anchor":"automatic"}}]},"bf5fb63c-57c4-466f-b735-2d44229b610b":{"automatic":true,"metadata":{"terraform_reference":"role"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"role","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"e36d9a18-95d3-4dce-be34-c1321323c123","anchor":"automatic"}},{"node":{"id":"1df0d016-9025-491b-81fb-6df3befdea2d","anchor":"automatic"}}]},"ec14ae28-9408-45b6-a8c7-c28c439e87be":{"automatic":true,"metadata":{"terraform_reference":"assume_role_policy"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"assume_role_policy","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"9652d281-0189-42bd-b204-5a42a68e9246","anchor":"automatic"}},{"node":{"id":"1f920ed8-d16d-49fd-b466-959ed27b9e55","anchor":"automatic"}}]},"51a45368-6c38-4527-a84b-77bc75f8090e":{"automatic":true,"metadata":{"terraform_reference":"policy"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"policy","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"e68c9676-89ea-4b6e-8774-28fb9aa9435d","anchor":"automatic"}},{"node":{"id":"17393011-711b-4181-a18f-1bfda852c2af","anchor":"automatic"}}]},"2e8378c3-1304-42ff-a7be-41e6b0b6a703":{"automatic":true,"metadata":{"terraform_reference":"policy"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"policy","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"712d519a-0b89-424d-a231-6600d3515553","anchor":"automatic"}},{"node":{"id":"66293e25-5096-4c01-8a4f-1735f6dc5b40","anchor":"automatic"}}]},"dc4a20c5-7b80-441d-b14d-e81d9b8d10e1":{"automatic":true,"metadata":{"terraform_reference":"role"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"role","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"b65070fb-a8c7-44b9-918b-5d44456bafca","anchor":"automatic"}},{"node":{"id":"1df0d016-9025-491b-81fb-6df3befdea2d","anchor":"automatic"}}]},"9a280247-f0f8-437a-9894-42b91edfe7be":{"automatic":true,"metadata":{"terraform_reference":"role"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"role","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"e68c9676-89ea-4b6e-8774-28fb9aa9435d","anchor":"automatic"}},{"node":{"id":"a6246fee-0118-4390-b402-1746ed81393d","anchor":"automatic"}}]},"be6523d0-844d-434d-b72a-2627d8518957":{"automatic":true,"metadata":{"terraform_reference":"policy"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"policy","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"b16814e8-9f50-4528-8a5d-2ac30779212a","anchor":"automatic"}},{"node":{"id":"5ecaa37f-fa55-4164-a5ad-ab6dba9e27dd","anchor":"automatic"}}]},"c2647326-fc36-4ce1-9aac-d7b366c2b651":{"automatic":true,"metadata":{"terraform_reference":"policy"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"policy","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"be1223df-988e-4a1f-855f-153361862a75","anchor":"automatic"}},{"node":{"id":"6adc970b-736c-4cb7-a808-6a9a5fec375c","anchor":"automatic"}}]},"4940d5b5-dbfc-4b22-b0ee-3b3de06d1ef3":{"automatic":true,"metadata":{"terraform_reference":"availability_zone"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"availability_zone","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"aec2d540-ef9d-4de8-b181-2e613c79df3c","anchor":"automatic"}},{"node":{"id":"8496bd8d-2397-4e4c-adde-d97c109fb5e1","anchor":"automatic"}}]},"4c90414a-7b63-441c-8423-1045f7f81313":{"automatic":true,"metadata":{"terraform_reference":"default_action.target_group_arn"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"target_group_arn","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"beca3cc6-742d-49ee-bf61-b8aa25ac9f28","anchor":"automatic"}},{"node":{"id":"367fcb07-53be-4af5-a815-6fb727b080e5","anchor":"automatic"}}]},"e47160b0-4626-49f7-91fb-e8229a20aa18":{"automatic":true,"metadata":{"terraform_reference":"network_configuration.security_groups"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"security_groups","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"66728e10-9b32-49bb-bb5c-d0e9fcf43b20","anchor":"automatic"}},{"node":{"id":"26e9b66d-7609-47eb-ac4f-7097a747237e","anchor":"automatic"}}]},"5c55515e-6337-454c-bd08-fddb3d9000a9":{"automatic":true,"metadata":{"terraform_reference":"route.gateway_id"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"gateway_id","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"28161f93-c248-4c9d-9f20-ec8b9e4d7b73","anchor":"automatic"}},{"node":{"id":"5549914b-7b8c-430a-9873-2ef7b682f274","anchor":"automatic"}}]},"a26bde3f-682d-4dcc-a179-0d2d82b46472":{"automatic":true,"metadata":{"terraform_reference":"statement.resources"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"resources","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"17393011-711b-4181-a18f-1bfda852c2af","anchor":"automatic"}},{"node":{"id":"f5f68808-300c-4eb8-9170-fcface54d984","anchor":"automatic"}}]},"38ee34e7-2be6-416d-9992-000d195ff139":{"automatic":true,"metadata":{"terraform_reference":"network_configuration.load_balancer.target_group_arn"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"target_group_arn","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"66728e10-9b32-49bb-bb5c-d0e9fcf43b20","anchor":"automatic"}},{"node":{"id":"367fcb07-53be-4af5-a815-6fb727b080e5","anchor":"automatic"}}]},"f25ae827-6440-4a64-9602-8f2cdc34c5c7":{"automatic":true,"metadata":{"terraform_reference":"statement.statement.resources"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"resources","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"f72302b7-5597-419d-b661-fcbb6270c1a1","anchor":"automatic"}},{"node":{"id":"712d519a-0b89-424d-a231-6600d3515553","anchor":"automatic"}}]},"07f77315-850f-4f15-9312-acec5673d3e5":{"automatic":true,"metadata":{"terraform_reference":"task_role_arn"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"task_role_arn","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"af58e92b-d3f5-4367-92d6-1435b8bbb3fd","anchor":"automatic"}},{"node":{"id":"9652d281-0189-42bd-b204-5a42a68e9246","anchor":"automatic"}}]},"fb2bb9b1-6787-43a9-b0e8-a28a5564bc7e":{"automatic":true,"metadata":{"terraform_reference":"statement.resources"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"resources","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"f72302b7-5597-419d-b661-fcbb6270c1a1","anchor":"automatic"}},{"node":{"id":"a4fdd51a-09f8-4ae8-8ce1-8fe4a1da800c","anchor":"automatic"}}]},"c2e0e2e3-2e6d-45a0-9bd8-5ca0d75f00d1":{"automatic":true,"metadata":{"terraform_reference":"target_key_id"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"target_key_id","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"027c13d7-6016-4ac5-a1af-e69b32b1e389","anchor":"automatic"}},{"node":{"id":"712d519a-0b89-424d-a231-6600d3515553","anchor":"automatic"}}]},"4f61b1a7-0034-4450-b84e-1af3c7f5f8e6":{"automatic":true,"metadata":{"terraform_reference":"route_table_id"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"route_table_id","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"bfa33878-b983-4610-a9c7-7408e2e9ddb7","anchor":"automatic"}},{"node":{"id":"28161f93-c248-4c9d-9f20-ec8b9e4d7b73","anchor":"automatic"}}]},"415a5b82-f6fc-41c5-ba1b-f66a8cd9117e":{"automatic":true,"metadata":{"terraform_reference":"container_definitions"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"container_definitions","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"af58e92b-d3f5-4367-92d6-1435b8bbb3fd","anchor":"automatic"}},{"node":{"id":"e19707c1-6f4c-48b9-8352-3b1baa84f8ae","anchor":"automatic"}}]},"e82ea7dc-9dfb-4c68-90fb-6ca1d090b7bc":{"automatic":true,"metadata":{"terraform_reference":"secret_id"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"secret_id","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"b9c84e1d-4212-45be-8dda-5a6aea7a00d0","anchor":"automatic"}},{"node":{"id":"e19707c1-6f4c-48b9-8352-3b1baa84f8ae","anchor":"automatic"}}]},"1a208d12-5e95-4fc1-bbaf-a0190f95e276":{"automatic":true,"metadata":{"terraform_reference":"execution_role_arn"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"execution_role_arn","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"af58e92b-d3f5-4367-92d6-1435b8bbb3fd","anchor":"automatic"}},{"node":{"id":"1df0d016-9025-491b-81fb-6df3befdea2d","anchor":"automatic"}}]},"dbe5c6e2-503b-4306-a5ba-da2816341802":{"automatic":true,"metadata":{"terraform_reference":"statement.statement.resources"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"resources","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"5ecaa37f-fa55-4164-a5ad-ab6dba9e27dd","anchor":"automatic"}},{"node":{"id":"712d519a-0b89-424d-a231-6600d3515553","anchor":"automatic"}}]},"b5152b52-49ef-4e22-8255-a80e56aff1c5":{"automatic":true,"metadata":{"terraform_reference":"statement.resources"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"resources","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"0ac782e5-04e7-4d25-8dbe-15c8f822f3fd","anchor":"automatic"}},{"node":{"id":"e19707c1-6f4c-48b9-8352-3b1baa84f8ae","anchor":"automatic"}}]},"a81effd5-03f1-4a55-a947-cdda221dc41c":{"automatic":true,"metadata":{"terraform_reference":"target_key_id"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"target_key_id","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"afabcfd7-2776-48f4-8574-b35e0be94268","anchor":"automatic"}},{"node":{"id":"be1223df-988e-4a1f-855f-153361862a75","anchor":"automatic"}}]},"d30b1658-4d0b-4592-9b5a-22c3630842c0":{"automatic":true,"metadata":{"terraform_reference":"kms_key_id"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"kms_key_id","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"e19707c1-6f4c-48b9-8352-3b1baa84f8ae","anchor":"automatic"}},{"node":{"id":"be1223df-988e-4a1f-855f-153361862a75","anchor":"automatic"}}]},"15ef81d0-4080-4391-9b2e-d2b1a3f79a5a":{"automatic":true,"metadata":{"terraform_reference":"statement.resources"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"resources","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"5ecaa37f-fa55-4164-a5ad-ab6dba9e27dd","anchor":"automatic"}},{"node":{"id":"a4fdd51a-09f8-4ae8-8ce1-8fe4a1da800c","anchor":"automatic"}}]},"829d1bd0-e9ea-47ec-9f10-c7f8be7ef1b4":{"automatic":true,"metadata":{"terraform_reference":"statement.resources"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"resources","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"207902b1-6657-4d75-95bf-e145b4f09666","anchor":"automatic"}},{"node":{"id":"be1223df-988e-4a1f-855f-153361862a75","anchor":"automatic"}}]},"4e4ad358-989a-4de3-b603-43d5415f9cc7":{"automatic":true,"metadata":{"terraform_reference":"container_definitions"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"container_definitions","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"af58e92b-d3f5-4367-92d6-1435b8bbb3fd","anchor":"automatic"}},{"node":{"id":"a4fdd51a-09f8-4ae8-8ce1-8fe4a1da800c","anchor":"automatic"}}]},"223d5918-82c4-46d6-8243-1af435495d96":{"automatic":true,"metadata":{"terraform_reference":"assume_role_policy"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"assume_role_policy","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"1df0d016-9025-491b-81fb-6df3befdea2d","anchor":"automatic"}},{"node":{"id":"1f920ed8-d16d-49fd-b466-959ed27b9e55","anchor":"automatic"}}]},"ef292125-12f4-49fa-81c5-c3a4f37f35fb":{"automatic":true,"metadata":{"terraform_reference":"role"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"role","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"3393f8f1-9096-4bb0-95a7-06b4e8a2cd5d","anchor":"automatic"}},{"node":{"id":"9652d281-0189-42bd-b204-5a42a68e9246","anchor":"automatic"}}]},"f39d5035-2cda-4bf5-8c71-46fe7edbf7ff":{"automatic":true,"metadata":{"terraform_reference":"kms_key_id"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"kms_key_id","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"f5f68808-300c-4eb8-9170-fcface54d984","anchor":"automatic"}},{"node":{"id":"712d519a-0b89-424d-a231-6600d3515553","anchor":"automatic"}}]},"5c7c579c-e134-425e-b4f8-81872cbe859e":{"automatic":true,"metadata":{"terraform_reference":"policy"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"policy","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"3393f8f1-9096-4bb0-95a7-06b4e8a2cd5d","anchor":"automatic"}},{"node":{"id":"f72302b7-5597-419d-b661-fcbb6270c1a1","anchor":"automatic"}}]},"f8b842db-100f-422b-91c9-d5340b72b88d":{"automatic":true,"metadata":{"terraform_reference":"statement.statement.statement.statement.resources"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"resources","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"17393011-711b-4181-a18f-1bfda852c2af","anchor":"automatic"}},{"node":{"id":"712d519a-0b89-424d-a231-6600d3515553","anchor":"automatic"}}]},"0c4847fc-8b0e-4171-9b7f-3add4f58e95e":{"automatic":true,"metadata":{"terraform_reference":"task_definition"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"task_definition","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"66728e10-9b32-49bb-bb5c-d0e9fcf43b20","anchor":"automatic"}},{"node":{"id":"af58e92b-d3f5-4367-92d6-1435b8bbb3fd","anchor":"automatic"}}]},"4deb10aa-7522-4c88-bdf0-cb8607c0d033":{"automatic":true,"metadata":{"terraform_reference":"statement.principals.identifiers"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"identifiers","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"6adc970b-736c-4cb7-a808-6a9a5fec375c","anchor":"automatic"}},{"node":{"id":"cb069311-7dc1-4899-887c-36a153b0cb4e","anchor":"automatic"}}]},"947ef709-af96-4914-81d1-29471a00ab00":{"automatic":true,"metadata":{"terraform_reference":"cluster"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"cluster","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"66728e10-9b32-49bb-bb5c-d0e9fcf43b20","anchor":"automatic"}},{"node":{"id":"f2ef1ab0-d859-4843-bdc2-0a7303a97e44","anchor":"automatic"}}]},"5f6143be-6799-40b4-afa4-f1a7e46740c6":{"automatic":true,"metadata":{"terraform_reference":"role"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"role","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"b16814e8-9f50-4528-8a5d-2ac30779212a","anchor":"automatic"}},{"node":{"id":"1df0d016-9025-491b-81fb-6df3befdea2d","anchor":"automatic"}}]},"7b72956e-4819-4f4e-b7a8-593e8c4da917":{"automatic":true,"metadata":{"terraform_reference":"statement.principals.identifiers"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"identifiers","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"66293e25-5096-4c01-8a4f-1735f6dc5b40","anchor":"automatic"}},{"node":{"id":"cb069311-7dc1-4899-887c-36a153b0cb4e","anchor":"automatic"}}]},"8d1b1e6a-e566-4570-8515-f9f0ba30fdd6":{"automatic":true,"metadata":{"terraform_reference":"load_balancer_arn"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"load_balancer_arn","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"beca3cc6-742d-49ee-bf61-b8aa25ac9f28","anchor":"automatic"}},{"node":{"id":"9aaee689-5d57-45bd-a540-13a6deef3e3c","anchor":"automatic"}}]},"075de1d9-a211-42c0-a56e-95af62fed8b0":{"automatic":true,"metadata":{"terraform_reference":"kms_key_id"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"kms_key_id","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"a4fdd51a-09f8-4ae8-8ce1-8fe4a1da800c","anchor":"automatic"}},{"node":{"id":"712d519a-0b89-424d-a231-6600d3515553","anchor":"automatic"}}]},"e5b35f5c-63bc-443a-86d3-e94c0e563338":{"automatic":true,"metadata":{"terraform_reference":"allocation_id"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"allocation_id","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"252c1a99-b33a-4f63-b18f-123704948583","anchor":"automatic"}},{"node":{"id":"113d98d3-6c5d-4ae3-bd06-ffad13663b7a","anchor":"automatic"}}]},"fef8ef38-4fa4-4ce1-b0c8-ce4d05bf94a5":{"automatic":true,"metadata":{"terraform_reference":"statement.resources"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"resources","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"207902b1-6657-4d75-95bf-e145b4f09666","anchor":"automatic"}},{"node":{"id":"e19707c1-6f4c-48b9-8352-3b1baa84f8ae","anchor":"automatic"}}]},"36e32e18-d3af-4c86-b86c-b05d9d46c681":{"automatic":true,"metadata":{"terraform_reference":"availability_zone"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"availability_zone","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"9010484f-d264-4587-b6ac-94e4cddea7f8","anchor":"automatic"}},{"node":{"id":"8496bd8d-2397-4e4c-adde-d97c109fb5e1","anchor":"automatic"}}]},"7e88d373-9fc9-4eae-8f50-2587a49196c3":{"automatic":true,"metadata":{"terraform_reference":"statement.statement.principals.identifiers"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"identifiers","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"6adc970b-736c-4cb7-a808-6a9a5fec375c","anchor":"automatic"}},{"node":{"id":"1df0d016-9025-491b-81fb-6df3befdea2d","anchor":"automatic"}}]},"10232358-6af2-4af5-97e8-90d62afcf83e":{"automatic":true,"metadata":{"terraform_reference":"log_destination"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"log_destination","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"aa54d569-1735-47c6-862a-e3532d8c58e0","anchor":"automatic"}},{"node":{"id":"f5f68808-300c-4eb8-9170-fcface54d984","anchor":"automatic"}}]},"235617c3-192c-4a4f-a613-9020c38f9321":{"automatic":true,"metadata":{"terraform_reference":"statement.statement.resources"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"resources","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"0ac782e5-04e7-4d25-8dbe-15c8f822f3fd","anchor":"automatic"}},{"node":{"id":"be1223df-988e-4a1f-855f-153361862a75","anchor":"automatic"}}]},"27f4e7e0-9694-434b-b923-289fa8907002":{"automatic":true,"metadata":{"terraform_reference":"route_table_id"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"route_table_id","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"29a2de97-936b-4a1a-b177-c8187fe31599","anchor":"automatic"}},{"node":{"id":"c682ba12-a885-4145-8dd6-ad7858058f5d","anchor":"automatic"}}]},"6f95ed54-7368-4ef4-8133-f10f7705830f":{"automatic":true,"metadata":{"terraform_reference":"route.nat_gateway_id"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"nat_gateway_id","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"c682ba12-a885-4145-8dd6-ad7858058f5d","anchor":"automatic"}},{"node":{"id":"252c1a99-b33a-4f63-b18f-123704948583","anchor":"automatic"}}]},"e933291d-a6cb-4831-91a7-1db4cb86b984":{"automatic":true,"metadata":{"terraform_reference":"iam_role_arn"},"graphics":{"shape":"orthogonal","color":4674921,"style":"solid","width":1,"startPointShape":"none","endPointShape":"arrow-outlined"},"label":{"text":"iam_role_arn","offset":{"x":0,"y":0},"pathPercentage":0.5,"graphics":{"color":0,"fontSize":12}},"points":[{"node":{"id":"aa54d569-1735-47c6-862a-e3532d8c58e0","anchor":"automatic"}},{"node":{"id":"a6246fee-0118-4390-b402-1746ed81393d","anchor":"automatic"}}]}}},"variables":[{"uuid":"b6f9ed20-767b-49cb-b79e-26045c9dad3a","created_at":"2025-12-20T13:09:07.521454Z","created_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","updated_at":"2025-12-20T13:09:07.521454Z","updated_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","name":"app_environment_variables","default":"[{\"name\":\"NODE_ENV\",\"value\":\"production\"}]","description":"List of public environment variables for the application","scope":"architecture","scope_id":"537d00ad-29a5-490e-b7a6-4bc2559491c3","sensitive":false,"type":"list(object({\n    name  = string\n    value = string\n  }))","validation":"","value":""},{"uuid":"f5487042-ab47-48c0-81e2-889dd7e4cc22","created_at":"2025-12-20T13:09:06.545209Z","created_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","updated_at":"2025-12-20T13:09:06.545209Z","updated_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","name":"aws_region","default":"\"us-east-1\"","description":"AWS region to deploy resources","scope":"architecture","scope_id":"537d00ad-29a5-490e-b7a6-4bc2559491c3","sensitive":false,"type":"string","validation":"","value":""},{"uuid":"ff2a8052-701d-4494-90f8-b093805bf0ed","created_at":"2025-12-20T13:09:07.020613Z","created_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","updated_at":"2025-12-20T13:09:07.020613Z","updated_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","name":"container_image","default":"","description":"Docker image URL from ECR","scope":"architecture","scope_id":"537d00ad-29a5-490e-b7a6-4bc2559491c3","sensitive":false,"type":"string","validation":"","value":""},{"uuid":"52255383-d07d-46d5-8552-a55048e530b1","created_at":"2025-12-20T13:09:07.118226Z","created_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","updated_at":"2025-12-20T13:09:07.118226Z","updated_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","name":"container_port","default":"3000","description":"Port the application listens on","scope":"architecture","scope_id":"537d00ad-29a5-490e-b7a6-4bc2559491c3","sensitive":false,"type":"number","validation":"","value":""},{"uuid":"099b9a5a-2516-40ca-ac75-75e25a7f3e50","created_at":"2025-12-20T13:09:07.213325Z","created_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","updated_at":"2025-12-20T13:09:07.213325Z","updated_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","name":"cpu","default":"256","description":"Fargate instance CPU units (256, 512, 1024)","scope":"architecture","scope_id":"537d00ad-29a5-490e-b7a6-4bc2559491c3","sensitive":false,"type":"number","validation":"","value":""},{"uuid":"88c7798f-67ab-4390-90a9-95bbb5c3e42b","created_at":"2025-12-20T13:09:07.426629Z","created_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","updated_at":"2025-12-20T13:09:07.426629Z","updated_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","name":"desired_count","default":"1","description":"Number of containers to run","scope":"architecture","scope_id":"537d00ad-29a5-490e-b7a6-4bc2559491c3","sensitive":false,"type":"number","validation":"","value":""},{"uuid":"dc2be154-d287-4076-81a9-0b5d84006105","created_at":"2025-12-20T13:09:06.790357Z","created_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","updated_at":"2025-12-20T13:09:06.790357Z","updated_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","name":"environment","default":"\"production\"","description":"Deployment environment (e.g. production, staging)","scope":"architecture","scope_id":"537d00ad-29a5-490e-b7a6-4bc2559491c3","sensitive":false,"type":"string","validation":"","value":""},{"uuid":"c68f05d4-1ac4-4c8b-bdde-c2e37483908f","created_at":"2025-12-20T13:09:07.332228Z","created_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","updated_at":"2025-12-20T13:09:07.332228Z","updated_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","name":"memory","default":"512","description":"Fargate instance memory (512, 1024, 2048)","scope":"architecture","scope_id":"537d00ad-29a5-490e-b7a6-4bc2559491c3","sensitive":false,"type":"number","validation":"","value":""},{"uuid":"af3533d6-216e-431e-a7ba-d8a57bc530c0","created_at":"2025-12-20T13:09:06.642909Z","created_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","updated_at":"2025-12-20T13:09:06.642909Z","updated_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","name":"project_name","default":"","description":"Name of the project used for resource naming","scope":"architecture","scope_id":"537d00ad-29a5-490e-b7a6-4bc2559491c3","sensitive":false,"type":"string","validation":"","value":""},{"uuid":"b4690bbb-9e6a-47d2-acf6-17b9c28e2974","created_at":"2025-12-20T13:09:07.616029Z","created_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","updated_at":"2025-12-20T13:09:07.616029Z","updated_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","name":"tags","default":"","description":"Default tags to apply to all resources.","scope":"architecture","scope_id":"537d00ad-29a5-490e-b7a6-4bc2559491c3","sensitive":false,"type":"map(any)","validation":"","value":"{\n\tarchuuid = \"537d00ad-29a5-490e-b7a6-4bc2559491c3\"\n\tenv      = \"Development\"\n}"},{"uuid":"87a32041-c5df-40fc-b8d8-76b55b3ddd8d","created_at":"2025-12-20T13:09:06.919454Z","created_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","updated_at":"2025-12-20T13:09:06.919454Z","updated_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","name":"vpc_cidr","default":"\"10.0.0.0/16\"","description":"CIDR block for VPC","scope":"architecture","scope_id":"537d00ad-29a5-490e-b7a6-4bc2559491c3","sensitive":false,"type":"string","validation":"","value":""}],"outputs":[{"uuid":"3bf4f6c7-502e-4cbd-8df2-5fa876e4e451","created_at":"2025-12-20T13:09:07.619156Z","created_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","updated_at":"2025-12-20T13:09:07.619156Z","updated_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","name":"vpc_id","value":"aws_vpc.main.id","description":"ID of the VPC","sensitive":false,"depends_on":null,"preconditions":null},{"uuid":"d84b9335-a499-414d-8262-350f3c36a940","created_at":"2025-12-20T13:09:07.624401Z","created_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","updated_at":"2025-12-20T13:09:07.624401Z","updated_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","name":"alb_dns_name","value":"aws_lb.main.dns_name","description":"DNS name of the Application Load Balancer","sensitive":false,"depends_on":null,"preconditions":null},{"uuid":"ed4da291-126d-4c72-bdc9-f399fa49d52d","created_at":"2025-12-20T13:09:07.626811Z","created_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","updated_at":"2025-12-20T13:09:07.626811Z","updated_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","name":"alb_url","value":"\"http://${aws_lb.main.dns_name}\"","description":"Full URL to access the application","sensitive":false,"depends_on":null,"preconditions":null},{"uuid":"d3fb090e-d420-411a-9e5c-216f3b7f8dd4","created_at":"2025-12-20T13:09:07.628867Z","created_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","updated_at":"2025-12-20T13:09:07.628867Z","updated_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","name":"ecs_cluster_name","value":"aws_ecs_cluster.main.name","description":"Name of the ECS cluster","sensitive":false,"depends_on":null,"preconditions":null},{"uuid":"9f5068b0-d2f5-4358-8f4a-824a055ea784","created_at":"2025-12-20T13:09:07.63079Z","created_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","updated_at":"2025-12-20T13:09:07.63079Z","updated_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","name":"ecs_service_name","value":"aws_ecs_service.main.name","description":"Name of the ECS service","sensitive":false,"depends_on":null,"preconditions":null},{"uuid":"d8a700ea-8ccb-49b2-8eb3-0fc650f14be3","created_at":"2025-12-20T13:09:07.632543Z","created_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","updated_at":"2025-12-20T13:09:07.632543Z","updated_by":"e12d6d92-5f80-4e62-8cfb-d37876bb7ff2","name":"cloudwatch_log_group","value":"aws_cloudwatch_log_group.ecs.name","description":"CloudWatch log group for ECS logs","sensitive":false,"depends_on":null,"preconditions":null}],"import_task_id":"00000000-0000-0000-0000-000000000000","import_status":"","schema_version":2}
